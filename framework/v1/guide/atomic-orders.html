<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Atomic orders | 0xcert Docs</title>
    <meta name="description" content="Leverage the most advanced open-source framework to create, manage and swap digital assets (ERC-721) and value tokens (ERC-20) on the blockchain.">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.d7956b4c.css" as="style"><link rel="preload" href="/assets/js/app.f85dbd4e.js" as="script"><link rel="preload" href="/assets/js/2.cf0f4b8b.js" as="script"><link rel="preload" href="/assets/js/7.ac8cad6a.js" as="script"><link rel="preload" href="/assets/js/13.d8765d49.js" as="script"><link rel="preload" href="/assets/js/5.36f6fd2c.js" as="script"><link rel="prefetch" href="/assets/js/10.e7ed92ac.js"><link rel="prefetch" href="/assets/js/11.fac430a0.js"><link rel="prefetch" href="/assets/js/12.71c9362a.js"><link rel="prefetch" href="/assets/js/14.75e0fe85.js"><link rel="prefetch" href="/assets/js/15.4bc74da7.js"><link rel="prefetch" href="/assets/js/16.9c798157.js"><link rel="prefetch" href="/assets/js/17.4a78e468.js"><link rel="prefetch" href="/assets/js/18.14896ffc.js"><link rel="prefetch" href="/assets/js/19.9285fb66.js"><link rel="prefetch" href="/assets/js/20.42a0dfb1.js"><link rel="prefetch" href="/assets/js/21.8aac9804.js"><link rel="prefetch" href="/assets/js/22.675d5f47.js"><link rel="prefetch" href="/assets/js/23.8350d6c9.js"><link rel="prefetch" href="/assets/js/24.52dcdd59.js"><link rel="prefetch" href="/assets/js/25.d97e6db2.js"><link rel="prefetch" href="/assets/js/26.463cad68.js"><link rel="prefetch" href="/assets/js/27.7cfd04ad.js"><link rel="prefetch" href="/assets/js/28.24fd8c3c.js"><link rel="prefetch" href="/assets/js/29.17a1b291.js"><link rel="prefetch" href="/assets/js/3.37314c6a.js"><link rel="prefetch" href="/assets/js/30.469d73f3.js"><link rel="prefetch" href="/assets/js/31.adbdf89f.js"><link rel="prefetch" href="/assets/js/32.53fc4bcd.js"><link rel="prefetch" href="/assets/js/33.7f609e16.js"><link rel="prefetch" href="/assets/js/34.ebb8cde7.js"><link rel="prefetch" href="/assets/js/35.99edb43a.js"><link rel="prefetch" href="/assets/js/36.ffcf569c.js"><link rel="prefetch" href="/assets/js/37.7c03262f.js"><link rel="prefetch" href="/assets/js/38.5412cda6.js"><link rel="prefetch" href="/assets/js/39.44f02f60.js"><link rel="prefetch" href="/assets/js/4.35ee9bae.js"><link rel="prefetch" href="/assets/js/40.6974f065.js"><link rel="prefetch" href="/assets/js/41.8cff6157.js"><link rel="prefetch" href="/assets/js/42.b5440491.js"><link rel="prefetch" href="/assets/js/43.40c15aba.js"><link rel="prefetch" href="/assets/js/44.90af89a4.js"><link rel="prefetch" href="/assets/js/45.579e2fc1.js"><link rel="prefetch" href="/assets/js/46.ee61bd52.js"><link rel="prefetch" href="/assets/js/47.3f4507a4.js"><link rel="prefetch" href="/assets/js/48.3de4abbf.js"><link rel="prefetch" href="/assets/js/49.c2384c9a.js"><link rel="prefetch" href="/assets/js/50.f815f323.js"><link rel="prefetch" href="/assets/js/51.af4f4b7e.js"><link rel="prefetch" href="/assets/js/52.0b178490.js"><link rel="prefetch" href="/assets/js/53.71a80a08.js"><link rel="prefetch" href="/assets/js/54.6a3cfdd5.js"><link rel="prefetch" href="/assets/js/55.f4b3158c.js"><link rel="prefetch" href="/assets/js/56.31ec0698.js"><link rel="prefetch" href="/assets/js/57.4e7b3dcd.js"><link rel="prefetch" href="/assets/js/58.76a67bcd.js"><link rel="prefetch" href="/assets/js/59.2b98be64.js"><link rel="prefetch" href="/assets/js/6.edff4e68.js"><link rel="prefetch" href="/assets/js/60.a8446153.js"><link rel="prefetch" href="/assets/js/61.0dfd2655.js"><link rel="prefetch" href="/assets/js/62.7c4cbd13.js"><link rel="prefetch" href="/assets/js/63.38ff9f26.js"><link rel="prefetch" href="/assets/js/64.5d48ddd1.js"><link rel="prefetch" href="/assets/js/65.6ded12c1.js"><link rel="prefetch" href="/assets/js/66.6b197e15.js"><link rel="prefetch" href="/assets/js/67.f03aa1ac.js"><link rel="prefetch" href="/assets/js/68.52df27ae.js"><link rel="prefetch" href="/assets/js/69.57495c1d.js"><link rel="prefetch" href="/assets/js/70.4151b728.js"><link rel="prefetch" href="/assets/js/71.1c359036.js"><link rel="prefetch" href="/assets/js/72.011ef3b9.js"><link rel="prefetch" href="/assets/js/73.0b6e28d1.js"><link rel="prefetch" href="/assets/js/74.ff30fe84.js"><link rel="prefetch" href="/assets/js/75.ec562c5a.js"><link rel="prefetch" href="/assets/js/76.988f6962.js"><link rel="prefetch" href="/assets/js/77.a983caf5.js"><link rel="prefetch" href="/assets/js/78.637f7e9a.js"><link rel="prefetch" href="/assets/js/8.2fdc7666.js"><link rel="prefetch" href="/assets/js/9.a88f7f98.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d7956b4c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/0xcert-logo.svg" alt="0xcert Docs" class="logo"> <span class="site-name can-hide">0xcert Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/framework/v2/" class="nav-link">
  Framework
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  0xcert API
</a></div><div class="nav-item"><a href="https://0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/0xcert/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/framework/v2/" class="nav-link">
  Framework
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  0xcert API
</a></div><div class="nav-item"><a href="https://0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/0xcert/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/v1/guide/getting-started.html" class="sidebar-link">Getting Started</a></li><li><a href="/framework/v1/guide/communication.html" class="sidebar-link">Communication</a></li><li><a href="/framework/v1/guide/using-providers.html" class="sidebar-link">Using providers</a></li><li><a href="/framework/v1/guide/about-assets.html" class="sidebar-link">About assets</a></li><li><a href="/framework/v1/guide/certification.html" class="sidebar-link">Certification</a></li><li><a href="/framework/v1/guide/asset-management.html" class="sidebar-link">Asset management</a></li><li><a href="/framework/v1/guide/about-cryptocurrency.html" class="sidebar-link">About cryptocurrency</a></li><li><a href="/framework/v1/guide/value-management.html" class="sidebar-link">Value Management</a></li><li><a href="/framework/v1/guide/atomic-orders.html" class="active sidebar-link">Atomic orders</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/framework/v1/guide/atomic-orders.html#how-it-works" class="sidebar-link">How it works</a></li><li class="sidebar-sub-header"><a href="/framework/v1/guide/atomic-orders.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/framework/v1/guide/atomic-orders.html#usage-overview" class="sidebar-link">Usage overview</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/v1/api/core.html" class="sidebar-link">API / Core</a></li><li><a href="/framework/v1/api/ethereum.html" class="sidebar-link">API / Ethereum</a></li><li><a href="/framework/v1/api/wanchain.html" class="sidebar-link">API / Wanchain</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Plugins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/framework/v1/plugins/vuejs.html" class="sidebar-link">VueJS Plug-in</a></li></ul></section></li></ul>  <div class="footer"><img src="/0xcert-framework.svg" alt> <p>The 0xcert Framework is a platform that provides a complete set of tools for building powerful decentralized applications (dapps). <br>Feel free to <a href="https://github.com/0xcert/framework/blob/master/CONTRIBUTING.md" target="_blank">contribute.</a></p></div></aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="atomic-orders"><a href="#atomic-orders" class="header-anchor">#</a> Atomic orders</h1> <p>If you want to exchange assets with someone in a trustless way, not depending on a third party nor accepting counterparty risk, atomic orders are the way to go.</p> <p>Atomic order is a way of creating an atomic swap within the 0xcert Framework. It is a set of instructions for what you will execute in a single mutation and with only two possible results. Either the mutation will succeed and all participants will receive their assets, or the mutation will fail and the operation will return to its starting point.</p> <h2 id="how-it-works"><a href="#how-it-works" class="header-anchor">#</a> How it works</h2> <p>An Atomic swap operation is always an order between a maker and a taker. A maker is the one who creates an order, signs it and sends it to the taker, who in turn executes the order and pays the execution fee. There are two different models when defining an order:</p> <ol><li>You know who will execute the order and you want them any only them to execute it. For example, you want to send a diploma to a specific receiver.</li> <li>You do not care who will execute the order. For example, you are selling a digital artwork to anyone who wants to buy it.</li></ol> <p>In case 1, both Maker and Taker need to be defined and every action in the order needs to have a sender and receiver.</p> <p>In case 2, only the Maker is defined, and in the actions either sender or receiver can be left undefined and will automatically be assigned to whoever will perform the action.</p> <p><img src="/assets/img/atomic-swap.33e9e009.svg" alt="Atomic swap"></p> <p>Multiple actions can be performed in such a manner. Currently supported actions include transferring assets, transferring value, or creating new assets. Using atomic orders provides multiple advantages in addition to trustlessness and safety. You can delegate paying storage fees to another user as well as delegate the time when a mutation should be made.</p> <p>The 0xcert Framework provides automatization to ensure that a specific agreement among multiple parties is reached. There are only two possible outcomes for an atomic swap:</p> <ul><li>Successful completion of the trade for all parties involved; or</li> <li>Abolition of the process and returning to the starting point if the swap operation encounters issues in its settlement.</li></ul> <p>There is no middle ground for an atomic swap's outcome which reduces the possibility of one party taking advantage over the other.</p> <p>Atomic swaps are performed through the Order Gateway structure which is permanently deployed on the 0xcert platform and is publicly available to everyone. A fixed sequence of required steps and conditions is secured by cryptography embedded in the order gateway. Once all steps are completed, the swap is confirmed and successfully settled. If not, the atomic swap process is abolished and canceled, with no effect on the assets that were subject to swap.</p> <p>While the trade agreement is created in an off-chain environment between trading parties, the settlement of the trade done by atomic swap is performed entirely on-chain. This makes every single step of the operation trackable and verifiable.</p> <div class="card custom-block"><p class="custom-block-title">More about atomic swaps</p> <p>For more information on the actual process of atomic operation, please check <a href="https://0xcert.org/news/dex-series-7-atomic-swaps/" target="_self" rel="noopener noreferrer alternate">this article</a>.</p></div> <div class="card custom-block"><p class="custom-block-title">Learn by example</p> <p>Click <a href="https://stackblitz.com/edit/atomic-order-example" target="_self" rel="noopener noreferrer alternate">here</a> to check the live example for this section.</p></div> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>We recommend you employ the package as an NPM package in your application.</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">npm</span> i --save @0xcert/ethereum-order-gateway
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that can be directly implemented in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about order gateway.</p> <h2 id="usage-overview"><a href="#usage-overview" class="header-anchor">#</a> Usage overview</h2> <p>To demonstrate the greatness of atomic swap operations, we will transfer an existent asset to a new wallet, then create a new asset and send it to the main wallet. All within a single mutation. First, we will prepare the state that allows us to execute the plan.</p> <p>These guidelines assume that you have followed the complete guide and taken all the steps from both <a href="/guide/certification.html">Certification</a> and <a href="/guide/asset-management.html">Asset management</a> sections, where we created a new asset with the ID <code>100</code>. For the purpose of this guide, please make sure you have opened two MetaMask accounts. In this example, we'll name the second account as <code>0xF9196F9f176fd2eF9243E8960817d5FbE63D79aa</code>, you may change it if you like.</p> <p>As usual, we first import a module into the application. This time, we import the <code>OrderGateway</code> class which represents a wrapper around a specific pre-deployed structure on the Ethereum network.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> OrderGateway <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-order-gateway'</span><span class="token punctuation">;</span>
</code></pre></div><p>Then, we create a new instance of the <code>OrderGateway</code> class with an ID that points to a pre-deployed order gateway on the Ethereum Ropsten network (this option can also be configured in the provider).</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> orderGatewayId <span class="token operator">=</span> <span class="token string">'0x073d230a53bffc8295d9a5247296213298e3fbcf'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> orderGateway <span class="token operator">=</span> OrderGateway<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> orderGatewayId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Now, we can define an order with two actions: the first action transfers an existing asset that we created in the <a href="/guide/asset-management.html">Asset management</a> section into our second MetaMask wallet. In the second action, we create a new asset with ID <code>200</code> and imprint created in the <a href="/guide/certification.html">Certification</a> section.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>For the purpose of simplicity of this guide, we will be both the maker and the taker of the order. For the <code>makerId</code> and <code>takerId</code>, we will employ our current MetaMask account.</p></div> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Order<span class="token punctuation">,</span> OrderActionKind <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-order-gateway'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
    makerId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
    takerId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> OrderActionKind<span class="token punctuation">.</span><span class="token constant">TRANSFER_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> assetLedgerId<span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> OrderActionKind<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> assetLedgerId<span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> provider<span class="token punctuation">.</span>accountId<span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'200'</span><span class="token punctuation">,</span>
            assetImprint<span class="token operator">:</span> <span class="token string">'aa431acea5ded5d83ea45f1caf39da9783775c8c8c65d30795f41ed6eff45e1b'</span><span class="token punctuation">,</span> <span class="token comment">// imprint generated in the certification step</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    seed<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// unique order identification</span>
    expiration<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 1 day</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> Order<span class="token punctuation">;</span>
</code></pre></div><p>When you work on a real case, make sure to set the <code>takerId</code> correctly. If you want your colleague or a third party to execute an order, you should insert their Ethereum wallet address as the <code>takerId</code>.</p> <p>The following step is made only by the maker, i.e. the person who creates an order.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> signedClaim <span class="token operator">=</span> <span class="token keyword">await</span> orderGateway<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By calling the <code>claim</code> function, we sign the order. Now, we need to send this signature to the taker, together with the <code>order</code> object via an arbitrary communication channel.</p> <p>All participants in the order must unlock the transferred assets and allow the <code>OrderGateway</code> to manage them. Make sure this step is done by every party that performs a transfer within order operations. In the example below, we authorize the <code>OrderGateway</code> to transfer the asset with ID <code>100</code> to another address and give it the ability to create assets.</p> <p>The <a href="/api/core.html#asset-proof">API</a> section contains information about how to authorize the order gateway for all the assets simultaneously, to avoid repeating approval for each individual asset (this is especially useful in the case of a decentralized exchange).</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// approve account for transfering asset</span>
<span class="token keyword">await</span> assetLedger<span class="token punctuation">.</span><span class="token function">approveAccount</span><span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">,</span> orderGateway<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// assign ability to mint</span>
<span class="token keyword">await</span> assetLedger<span class="token punctuation">.</span><span class="token function">grantAbilities</span><span class="token punctuation">(</span>orderGateway<span class="token punctuation">,</span> <span class="token punctuation">[</span>GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Don't forget to create an instance of <code>assetLedger</code> and to import <code>GeneralAssetLedgerAbility</code>.</p></div> <div class="card custom-block"><p class="custom-block-title">Why instance of OrderGateway?</p> <p>Order gateway is comprised of multiple smart contracts. To save your time from having to know their addresses, we handle it under the hood; however the instance of <code>OrderGateway</code> is required so that we know how to process it. You can also do this manually by finding the exact proxy contracts for the order gateway, but we recommend using <code>OrderGateway</code> instance and let the framework handle it for you.</p></div> <p>The following step is done only by the taker, who executes the order on the network and pays the execution fees. For the purpose of this guide, we define the same account for both maker and taker, since we are present on both sides.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> orderGateway<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> signedClaim<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By now, the asset with ID <code>100</code> should be present in our new wallet, while the main wallet should be left with the new asset with ID <code>200</code>.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> owner100Id <span class="token operator">=</span> <span class="token keyword">await</span> assetLedger<span class="token punctuation">.</span><span class="token function">getAssetAccount</span><span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; 0x...</span>

<span class="token keyword">const</span> owner200Id <span class="token operator">=</span> <span class="token keyword">await</span> assetLedger<span class="token punctuation">.</span><span class="token function">getAssetAccount</span><span class="token punctuation">(</span><span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; 0x...</span>
</code></pre></div><p>To learn more about atomic operations on Ethereum, please refer to the <a href="/api/ethereum.html#orders-gateway">API for Ethereum</a> section. For more information on atomic operations on Wanchain, please refer to the <a href="/api/wanchain.html#order-gateway">API for Wanchain</a> section.</p> <hr> <p>We have now come to the end of our basic guide. Hopefully, you have grasped the basic concepts of the framework, for further information, you may check how the features work in the <a href="/api/core.html">API section</a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/0xcert/docs/edit/master/framework/v1/guide/atomic-orders.md" target="_blank" rel="noopener noreferrer">Help us improve this page.</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/21/2020, 1:51:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/framework/v1/guide/value-management.html" class="prev">
        Value Management
      </a></span> <span class="next"><a href="/framework/v1/api/core.html">
        API / Core
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f85dbd4e.js" defer></script><script src="/assets/js/2.cf0f4b8b.js" defer></script><script src="/assets/js/7.ac8cad6a.js" defer></script><script src="/assets/js/13.d8765d49.js" defer></script><script src="/assets/js/5.36f6fd2c.js" defer></script>
  </body>
</html>
