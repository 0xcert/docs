<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ethereum connectors | 0xcert Framework v2.0 - beta</title>
    <meta name="description" content="Leverage the most advanced open-source framework to create, manage and swap digital assets (ERC-721) and value tokens (ERC-20) on the blockchain.">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.da95f995.css" as="style"><link rel="preload" href="/assets/js/app.f6c584b2.js" as="script"><link rel="preload" href="/assets/js/2.f20c3283.js" as="script"><link rel="preload" href="/assets/js/7.75831217.js" as="script"><link rel="preload" href="/assets/js/13.b5257690.js" as="script"><link rel="preload" href="/assets/js/5.8bbd2355.js" as="script"><link rel="prefetch" href="/assets/js/10.03c3773a.js"><link rel="prefetch" href="/assets/js/11.ded165b2.js"><link rel="prefetch" href="/assets/js/12.3552db5e.js"><link rel="prefetch" href="/assets/js/14.af0ecaf3.js"><link rel="prefetch" href="/assets/js/15.a977a377.js"><link rel="prefetch" href="/assets/js/16.d47194af.js"><link rel="prefetch" href="/assets/js/17.ca0e3fbc.js"><link rel="prefetch" href="/assets/js/18.976311a7.js"><link rel="prefetch" href="/assets/js/19.55e8121b.js"><link rel="prefetch" href="/assets/js/20.634eaf34.js"><link rel="prefetch" href="/assets/js/21.592baaa6.js"><link rel="prefetch" href="/assets/js/22.242f2c10.js"><link rel="prefetch" href="/assets/js/23.ef79e661.js"><link rel="prefetch" href="/assets/js/24.bce06c48.js"><link rel="prefetch" href="/assets/js/25.0842674a.js"><link rel="prefetch" href="/assets/js/26.ca986deb.js"><link rel="prefetch" href="/assets/js/27.77eac601.js"><link rel="prefetch" href="/assets/js/28.31b3e84a.js"><link rel="prefetch" href="/assets/js/29.2008f371.js"><link rel="prefetch" href="/assets/js/3.e085c15b.js"><link rel="prefetch" href="/assets/js/30.2dc44648.js"><link rel="prefetch" href="/assets/js/31.462d57ea.js"><link rel="prefetch" href="/assets/js/32.c009a518.js"><link rel="prefetch" href="/assets/js/33.ac729c23.js"><link rel="prefetch" href="/assets/js/34.b44bc98e.js"><link rel="prefetch" href="/assets/js/4.cbce8c58.js"><link rel="prefetch" href="/assets/js/6.cd9bf40f.js"><link rel="prefetch" href="/assets/js/8.9091d9b3.js"><link rel="prefetch" href="/assets/js/9.b9dedc79.js">
    <link rel="stylesheet" href="/assets/css/0.styles.da95f995.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/0xcert-logo.svg" alt="0xcert Framework v2.0 - beta" class="logo"> <span class="site-name can-hide">0xcert Framework v2.0 - beta</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://v1.docs.0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.0
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  0xcert Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/0xcert/framework" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://v1.docs.0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.0
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://0xcert.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  0xcert Home
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/0xcert/framework" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction/overview.html" class="sidebar-link">Overview</a></li><li><a href="/introduction/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/introduction/non-fungible-assets.html" class="sidebar-link">Non-fungible assets</a></li><li><a href="/introduction/fungible-values.html" class="sidebar-link">Fungible values</a></li><li><a href="/introduction/0xcert-tokens.html" class="sidebar-link">0xcert tokens</a></li><li><a href="/introduction/atomic-transactions.html" class="sidebar-link">Atomic transactions</a></li><li><a href="/introduction/interoperability.html" class="sidebar-link">Interoperability</a></li><li><a href="/introduction/authenticity.html" class="sidebar-link">Authenticity</a></li><li><a href="/introduction/threat-models.html" class="sidebar-link">Threat models</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/certification.html" class="sidebar-link">Certification</a></li><li><a href="/guides/communication.html" class="sidebar-link">Communication</a></li><li><a href="/guides/providers.html" class="sidebar-link">Providers</a></li><li><a href="/guides/asset-management.html" class="sidebar-link">Asset management</a></li><li><a href="/guides/value-management.html" class="sidebar-link">Value management</a></li><li><a href="/guides/atomic-deployments.html" class="sidebar-link">Atomic deployments</a></li><li><a href="/guides/atomic-actions.html" class="sidebar-link">Atomic actions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API References</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/certification.html" class="sidebar-link">Certification</a></li><li><a href="/api/0xcertapi-rest.html" class="sidebar-link">0xcertAPI REST</a></li><li><a href="/api/0xcertapi-client.html" class="sidebar-link">0xcertAPI Client</a></li><li><a href="/api/ethereum-connectors.html" class="active sidebar-link">Ethereum connectors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#bitski-back-end-provider" class="sidebar-link">Bitski back-end provider</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#bitskiprovider-options" class="sidebar-link">BitskiProvider(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#accountid" class="sidebar-link">accountId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#assetledgersource" class="sidebar-link">assetLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#buildgatewayconfig-networkkind" class="sidebar-link">buildGatewayConfig(networkKind)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#clientid" class="sidebar-link">clientId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#credentialsid" class="sidebar-link">credentialsId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#credentialssecret" class="sidebar-link">credentialsSecret</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#emit-event-options" class="sidebar-link">emit(event, ...options);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#gatewayconfig" class="sidebar-link">gatewayConfig</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getavailableaccounts" class="sidebar-link">getAvailableAccounts()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-options" class="sidebar-link">getInstance(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getnetworkversion" class="sidebar-link">getNetworkVersion()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#iscurrentaccount-accountid" class="sidebar-link">isCurrentAccount(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#issupported" class="sidebar-link">isSupported()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isunsaferecipientid-ledgerid" class="sidebar-link">isUnsafeRecipientId(ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#log-message" class="sidebar-link">log(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutationtimeout" class="sidebar-link">mutationTimeout</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#network" class="sidebar-link">network</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#on-event-handler" class="sidebar-link">on(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#once-event-handler" class="sidebar-link">once(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#off-event-handler" class="sidebar-link">off(event, handler)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#requiredconfirmations" class="sidebar-link">requiredConfirmations</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#retrygaspricemultiplier" class="sidebar-link">retryGasPriceMultiplier</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sandbox" class="sidebar-link">sandbox</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sign-message" class="sidebar-link">sign(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signmethod" class="sidebar-link">signMethod</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#unsaferecipientids" class="sidebar-link">unsafeRecipientIds</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#valueledgersource" class="sidebar-link">valueLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#verbose" class="sidebar-link">verbose</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#bitski-front-end-provider" class="sidebar-link">Bitski front-end provider</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-2" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#bitskiprovider-options-2" class="sidebar-link">BitskiProvider(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#accountid-2" class="sidebar-link">accountId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#assetledgersource-2" class="sidebar-link">assetLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#buildgatewayconfig-networkkind-2" class="sidebar-link">buildGatewayConfig(networkKind)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#clientid-2" class="sidebar-link">clientId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#emit-event-options-2" class="sidebar-link">emit(event, ...options);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#gatewayconfig-2" class="sidebar-link">gatewayConfig</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getavailableaccounts-2" class="sidebar-link">getAvailableAccounts()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getconnecteduser" class="sidebar-link">getConnectedUser()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-options-2" class="sidebar-link">getInstance(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getnetworkversion-2" class="sidebar-link">getNetworkVersion()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#iscurrentaccount-accountid-2" class="sidebar-link">isCurrentAccount(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#issupported-2" class="sidebar-link">isSupported()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#issignedin" class="sidebar-link">isSignedIn()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isunsaferecipientid-ledgerid-2" class="sidebar-link">isUnsafeRecipientId(ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#log-message-2" class="sidebar-link">log(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutationtimeout-2" class="sidebar-link">mutationTimeout</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#network-2" class="sidebar-link">network</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#on-event-handler-2" class="sidebar-link">on(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#once-event-handler-2" class="sidebar-link">once(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#off-event-handler-2" class="sidebar-link">off(event, handler)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#redirecturl" class="sidebar-link">redirectUrl</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#requiredconfirmations-2" class="sidebar-link">requiredConfirmations</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#retrygaspricemultiplier-2" class="sidebar-link">retryGasPriceMultiplier</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sandbox-2" class="sidebar-link">sandbox</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sign-message-2" class="sidebar-link">sign(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signin" class="sidebar-link">signIn()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signmethod-2" class="sidebar-link">signMethod</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signout" class="sidebar-link">signOut()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#unsaferecipientids-2" class="sidebar-link">unsafeRecipientIds</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#valueledgersource-2" class="sidebar-link">valueLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#verbose-2" class="sidebar-link">verbose</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#metamask-provider" class="sidebar-link">MetaMask provider</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-3" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#metamaskprovider-options" class="sidebar-link">MetamaskProvider(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#accountid-3" class="sidebar-link">accountId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#assetledgersource-3" class="sidebar-link">assetLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#buildgatewayconfig-networkkind-3" class="sidebar-link">buildGatewayConfig(networkKind)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#emit-event-options-3" class="sidebar-link">emit(event, ...options);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#enable" class="sidebar-link">enable()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#gatewayconfig-3" class="sidebar-link">gatewayConfig</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getavailableaccounts-3" class="sidebar-link">getAvailableAccounts()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-options-3" class="sidebar-link">getInstance(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getnetworkversion-3" class="sidebar-link">getNetworkVersion()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#iscurrentaccount-accountid-3" class="sidebar-link">isCurrentAccount(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isenabled" class="sidebar-link">isEnabled()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#issupported-3" class="sidebar-link">isSupported()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isunsaferecipientid-ledgerid-3" class="sidebar-link">isUnsafeRecipientId(ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#log-message-3" class="sidebar-link">log(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutationtimeout-3" class="sidebar-link">mutationTimeout</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#on-event-handler-3" class="sidebar-link">on(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#once-event-handler-3" class="sidebar-link">once(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#off-event-handler-3" class="sidebar-link">off(event, handler)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#requiredconfirmations-3" class="sidebar-link">requiredConfirmations</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#retrygaspricemultiplier-3" class="sidebar-link">retryGasPriceMultiplier</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sandbox-3" class="sidebar-link">sandbox</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sign-message-3" class="sidebar-link">sign(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signmethod-3" class="sidebar-link">signMethod</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#unsaferecipientids-3" class="sidebar-link">unsafeRecipientIds</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#valueledgersource-3" class="sidebar-link">valueLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#verbose-3" class="sidebar-link">verbose</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#http-provider" class="sidebar-link">HTTP provider</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-4" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#httpprovider-options" class="sidebar-link">HttpProvider(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#assetledgersource-4" class="sidebar-link">assetLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#buildgatewayconfig-networkkind-4" class="sidebar-link">buildGatewayConfig(networkKind)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getavailableaccounts-4" class="sidebar-link">getAvailableAccounts()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-options-4" class="sidebar-link">getInstance(options)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getnetworkversion-4" class="sidebar-link">getNetworkVersion()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#iscurrentaccount-accountid-4" class="sidebar-link">isCurrentAccount(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#issupported-4" class="sidebar-link">isSupported()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isunsaferecipientid-ledgerid-4" class="sidebar-link">isUnsafeRecipientId(ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#log-message-4" class="sidebar-link">log(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutationtimeout-4" class="sidebar-link">mutationTimeout</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#on-event-handler-4" class="sidebar-link">on(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#once-event-handler-4" class="sidebar-link">once(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#off-event-handler-4" class="sidebar-link">off(event, handler)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#requiredconfirmations-4" class="sidebar-link">requiredConfirmations</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#retrygaspricemultiplier-4" class="sidebar-link">retryGasPriceMultiplier</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sandbox-4" class="sidebar-link">sandbox</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sign-message-4" class="sidebar-link">sign(message)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signmethod-4" class="sidebar-link">signMethod</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#unsaferecipientids-4" class="sidebar-link">unsafeRecipientIds</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#valueledgersource-4" class="sidebar-link">valueLedgerSource</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#verbose-4" class="sidebar-link">verbose</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#provider-events" class="sidebar-link">Provider events</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutation" class="sidebar-link">Mutation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutation-provider-mutationid-context" class="sidebar-link">Mutation(provider, mutationId, context?)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#cancel" class="sidebar-link">cancel()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#complete" class="sidebar-link">complete()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#confirmations" class="sidebar-link">confirmations</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#emit-event-options-4" class="sidebar-link">emit(event, options);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#forget" class="sidebar-link">forget()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#id" class="sidebar-link">id</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#iscompleted" class="sidebar-link">isCompleted()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#ispending" class="sidebar-link">isPending()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#logs" class="sidebar-link">logs</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#on-event-handler-5" class="sidebar-link">on(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#once-event-handler-5" class="sidebar-link">once(event, handler);</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#off-event-handler-5" class="sidebar-link">off(event, handler)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#receiverid" class="sidebar-link">receiverId</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#retry" class="sidebar-link">retry()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#resolve" class="sidebar-link">resolve()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#senderid" class="sidebar-link">senderId</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mutation-events" class="sidebar-link">Mutation events</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#asset-ledger" class="sidebar-link">Asset ledger</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-5" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#assetledger-provider-ledgerid" class="sidebar-link">AssetLedger(provider, ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#approveaccount-assetid-accountid" class="sidebar-link">approveAccount(assetId, accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#approveoperator-accountid" class="sidebar-link">approveOperator(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#createasset-recipe" class="sidebar-link">createAsset(recipe)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#deploy-provider-recipe" class="sidebar-link">deploy(provider, recipe)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#destroyasset-assetid" class="sidebar-link">destroyAsset(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#disapproveaccount-assetid" class="sidebar-link">disapproveAccount(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#disapproveoperator-accountid" class="sidebar-link">disapproveOperator(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#disabletransfers" class="sidebar-link">disableTransfers()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#enabletransfers" class="sidebar-link">enableTransfers()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getabilities-accountid" class="sidebar-link">getAbilities(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getaccountassetidat-accountid-index" class="sidebar-link">getAccountAssetIdAt(accountId, index)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getapprovedaccount-assetid" class="sidebar-link">getApprovedAccount(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getasset-assetid" class="sidebar-link">getAsset(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getassetaccount-assetid" class="sidebar-link">getAssetAccount(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getassetidat-index" class="sidebar-link">getAssetIdAt(index)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getbalance-accountid" class="sidebar-link">getBalance(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getcapabilities" class="sidebar-link">getCapabilities()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinfo" class="sidebar-link">getInfo()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-provider-ledgerid" class="sidebar-link">getInstance(provider, ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#id-2" class="sidebar-link">id</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#grantabilities-accountid-abilities" class="sidebar-link">grantAbilities(accountId, abilities)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isapprovedaccount-assetid-accountid" class="sidebar-link">isApprovedAccount(assetId, accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isapprovedoperator-accountid-operatorid" class="sidebar-link">isApprovedOperator(accountId, operatorId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#istransferable" class="sidebar-link">isTransferable()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#revokeabilities-accountid-abilities" class="sidebar-link">revokeAbilities(accountId, abilities)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#revokeasset-assetid" class="sidebar-link">revokeAsset(assetId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#setabilities-accountid-abilities" class="sidebar-link">setAbilities(accountId, abilities)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#update-recipe" class="sidebar-link">update(recipe)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#updateasset-assetid-recipe" class="sidebar-link">updateAsset(assetId, recipe)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#transferasset-recipe" class="sidebar-link">transferAsset(recipe)</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#ledger-abilities" class="sidebar-link">Ledger abilities</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#ledger-capabilities" class="sidebar-link">Ledger capabilities</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#value-ledger" class="sidebar-link">Value ledger</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-6" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#valueledger-provider-ledgerid" class="sidebar-link">ValueLedger(provider, ledgerId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#approvevalue-value-accountid" class="sidebar-link">approveValue(value, accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#deploy-provider-recipe-2" class="sidebar-link">deploy(provider, recipe)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#disapprovevalue-accountid" class="sidebar-link">disapproveValue(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getapprovedvalue-accountid-spenderid" class="sidebar-link">getApprovedValue(accountId, spenderId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getbalance-accountid-2" class="sidebar-link">getBalance(accountId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinfo-2" class="sidebar-link">getInfo()</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-provider-id" class="sidebar-link">getInstance(provider, id)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#id-3" class="sidebar-link">id</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#isapprovedvalue-value-accountid-spenderid" class="sidebar-link">isApprovedValue(value, accountId, spenderId)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#transfervalue-recipe" class="sidebar-link">transferValue(recipe)</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#gateway" class="sidebar-link">Gateway</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#installation-7" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#gateway-provider-gatewayconfig" class="sidebar-link">Gateway(provider, gatewayConfig?)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#cancel-order" class="sidebar-link">cancel(order)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#config" class="sidebar-link">config</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getinstance-provider-gatewayconfig" class="sidebar-link">getInstance(provider, gatewayConfig?)</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#getproxyaccountid-proxykind-ledgerid" class="sidebar-link">getProxyAccountId(proxyKind, ledgerId?)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#hash-order" class="sidebar-link">hash(order)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#perform-order-signature" class="sidebar-link">perform(order, signature)</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#sign-order" class="sidebar-link">sign(order)</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#order-kinds" class="sidebar-link">Order kinds</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#asset-ledger-deploy-order" class="sidebar-link">Asset ledger deploy order</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorder" class="sidebar-link">DynamicActionsOrder</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorder" class="sidebar-link">FixedActionsOrder</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signeddynamicactionsorder" class="sidebar-link">SignedDynamicActionsOrder</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#signedfixedactionsorder" class="sidebar-link">SignedFixedActionsOrder</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#value-ledger-deploy-order" class="sidebar-link">Value ledger deploy order</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#actionsorder-actions" class="sidebar-link">ActionsOrder actions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactioncreateasset" class="sidebar-link">DynamicActionsOrderActionCreateAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactiondestroyasset" class="sidebar-link">DynamicActionsOrderActionDestroyAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactionsetabilities" class="sidebar-link">DynamicActionsOrderActionSetAbilities</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactionupdateassetimprint" class="sidebar-link">DynamicActionsOrderActionUpdateAssetImprint</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactiontransferasset" class="sidebar-link">DynamicActionsOrderActionTransferAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#dynamicactionsorderactiontransfervalue" class="sidebar-link">DynamicActionsOrderActionTransferValue</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactioncreateasset" class="sidebar-link">FixedActionsOrderActionCreateAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactiondestroyasset" class="sidebar-link">FixedActionsOrderActionDestroyAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactionsetabilities" class="sidebar-link">FixedActionsOrderActionSetAbilities</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactionupdateassetimprint" class="sidebar-link">FixedActionsOrderActionUpdateAssetImprint</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactiontransferasset" class="sidebar-link">FixedActionsOrderActionTransferAsset</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#fixedactionsorderactiontransfervalue" class="sidebar-link">FixedActionsOrderActionTransferValue</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#public-addresses" class="sidebar-link">Public addresses</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#mainnet" class="sidebar-link">Mainnet</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#ropsten" class="sidebar-link">Ropsten</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#rinkeby" class="sidebar-link">Rinkeby</a></li></ul></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#possible-errors" class="sidebar-link">Possible errors</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#framework-errors" class="sidebar-link">Framework errors</a></li><li class="sidebar-sub-header"><a href="/api/ethereum-connectors.html#smart-contract-errors" class="sidebar-link">Smart contract errors</a></li></ul></li></ul></li><li><a href="/api/wanchain-connectors.html" class="sidebar-link">Wanchain connectors</a></li><li><a href="/api/vuejs-plugin.html" class="sidebar-link">Vue.js Plugin</a></li></ul></section></li></ul>  <div class="footer"><img src="/0xcert-framework.svg" alt> <p>The 0xcert Framework is a platform that provides a complete set of tools for building powerful decentralized applications (dapps). <br>Feel free to <a href="https://github.com/0xcert/framework/blob/master/CONTRIBUTING.md" target="_blank">contribute.</a></p></div></aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ethereum-connectors"><a href="#ethereum-connectors" class="header-anchor">#</a> Ethereum connectors</h1> <h2 id="bitski-back-end-provider"><a href="#bitski-back-end-provider" class="header-anchor">#</a> Bitski back-end provider</h2> <p>A <a href="https://www.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski</a> back-end provider is applied to back-end Node.js usage. You will be able to connect to the Ethereum blockchain and create queries and mutations via your Bitski developer wallets. To set up Bitski back-end provider, you need to first create a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">development account</a> on Bitski.</p> <h3 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-bitski-backend-provider
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="bitskiprovider-options"><a href="#bitskiprovider-options" class="header-anchor">#</a> BitskiProvider(options)</h3> <p>A class providing communication with the Ethereum blockchain through <a href="https://www.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski</a>.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>options.accountId</td> <td>A <code>string</code> representing the Ethereum account that will perform actions.</td></tr> <tr><td>options.assetLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</td></tr> <tr><td>options.clientId</td> <td>A <code>string</code> representing the Bitski client ID. You get the client ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</td></tr> <tr><td>options.credentialsId</td> <td>A <code>string</code> representing the Bitski credentials ID. You get the credentials ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</td></tr> <tr><td>options.credentialsSecret</td> <td>A <code>string</code> representing the Bitski secret. You get the credentials secret by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</td></tr> <tr><td>options.gasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a mutation. It defaults to <code>1.1</code>.</td></tr> <tr><td>options.gatewayConfig.assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>options.gatewayConfig.actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>options.gatewayConfig.valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr> <tr><td>options.mutationTimeout</td> <td>The <code>number</code> of milliseconds after which a mutation times out. Defaults to <code>3600000</code>. You can set it to <code>-1</code> to disable the timeout.</td></tr> <tr><td>options.network</td> <td>A string representing the Ethereum network we will connect to. Mainnet by default.</td></tr> <tr><td>options.retryGasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation. It defaults to <code>2</code>.</td></tr> <tr><td>options.requiredConfirmations</td> <td>An <code>integer</code> representing the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</td></tr> <tr><td>options.signMethod</td> <td>An <code>integer</code> representing the signature type. Available options are <code>0</code> (eth_sign) or <code>2</code> (EIP-712) or <code>3</code> (personal_sign). It defaults to <code>0</code>.</td></tr> <tr><td>options.sandbox</td> <td>A <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</td></tr> <tr><td>options.unsafeRecipientIds</td> <td>A list of <code>strings</code> representing smart contract addresses that do not support safe ERC-721 transfers (e.g., CryptoKitties address should be listed here).</td></tr> <tr><td>options.valueLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</td></tr> <tr><td>options.verbose</td> <td>A <code>boolean</code> indicating whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BitskiProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitskiProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    clientId<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    credentialsId<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    credentialsSecret<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#bitski-front-end-provider">Bitski front-end provider</a></p> <h3 id="accountid"><a href="#accountid" class="header-anchor">#</a> accountId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the user's current Ethereum wallet address.</p> <h3 id="assetledgersource"><a href="#assetledgersource" class="header-anchor">#</a> assetLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</p> <h3 id="buildgatewayconfig-networkkind"><a href="#buildgatewayconfig-networkkind" class="header-anchor">#</a> buildGatewayConfig(networkKind)</h3> <p>A function that returns the current gateway config based on the deployed gateway smart contracts. Note that config will change based on release versions. If you do not want the smart contract addresses to update automatically, you should not use this function.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>networkKind</td> <td>[required] A <code>number</code> representing the Ethereum network for which we want to get the gateway config.</td></tr></tbody></table> <h3 id="clientid"><a href="#clientid" class="header-anchor">#</a> clientId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the Bitski client ID. You get the client ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</p> <h3 id="credentialsid"><a href="#credentialsid" class="header-anchor">#</a> credentialsId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the Bitski credentials ID. You get the credentials ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</p> <h3 id="credentialssecret"><a href="#credentialssecret" class="header-anchor">#</a> credentialsSecret</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the Bitski secret. You get the credentials secret by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</p> <h3 id="emit-event-options"><a href="#emit-event-options" class="header-anchor">#</a> emit(event, ...options);</h3> <p>A <code>synchronous</code> class instance <code>function</code> to manually trigger a provider event.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>options</td> <td>[required] Pass valid current and previous account ID for <code>ACCOUNT_CHANGE</code> event or valid current and previous network version for <code>NETWORK_CHANGE</code> event.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AccountEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span>

mutation<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>AccountEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gatewayconfig"><a href="#gatewayconfig" class="header-anchor">#</a> gatewayConfig</h3> <p>A class instance <code>variable</code> holding a <code>GatewayConfig</code> which represents the configuration for <code>Gateway</code> smart contracts.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr></tbody></table> <h3 id="getavailableaccounts"><a href="#getavailableaccounts" class="header-anchor">#</a> getAvailableAccounts()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns currently available Ethereum wallet addresses.</p> <p><strong>Result:</strong></p> <p>A list of <code>strings</code> representing Ethereum account IDs.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountIds <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getAvailableAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-options"><a href="#getinstance-options" class="header-anchor">#</a> getInstance(options)</h3> <p>A static class <code>function</code> that returns a new instance of the BitskiProvider class (alias for <code>new BitskiProvider</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#bitski-provider">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BitskiProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span>

<span class="token comment">// create provider instance</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> BitskiProvider<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnetworkversion"><a href="#getnetworkversion" class="header-anchor">#</a> getNetworkVersion()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the Ethereum network version (e.g., <code>1</code> for Ethereum Mainnet).</p> <p><strong>Result:</strong></p> <p>A <code>string</code> representing the Ethereum network version.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getNetworkVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iscurrentaccount-accountid"><a href="#iscurrentaccount-accountid" class="header-anchor">#</a> isCurrentAccount(accountId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>accountId</code> matches the currently set account ID.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>accountId</code> matches the currently set account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ethereum wallet address</span>
<span class="token keyword">const</span> walletId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isCurrentAccount</span><span class="token punctuation">(</span>walletId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="issupported"><a href="#issupported" class="header-anchor">#</a> isSupported()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provider is supported by the environment.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the provider can be used.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="isunsaferecipientid-ledgerid"><a href="#isunsaferecipientid-ledgerid" class="header-anchor">#</a> isUnsafeRecipientId(ledgerId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>id</code> is listed among unsafe recipient IDs on the provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A <code>string</code> representing an address of the ERC-721-related smart contract on the Ethereum blockchain.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>id</code> is an unsafe recipient.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// unsafe recipient address</span>
<span class="token keyword">const</span> criptoKittiesId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isUnsafe <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isUnsafeRecipientId</span><span class="token punctuation">(</span>criptoKittiesId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#unsaferecipientids">unsafeRecipientIds</a></p> <h3 id="log-message"><a href="#log-message" class="header-anchor">#</a> log(message)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which logs a message to console if verbose mode is active, otherwise it does nothing.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>provider<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>message</td> <td>[required] Message to log.</td></tr></tbody></table> <h3 id="mutationtimeout"><a href="#mutationtimeout" class="header-anchor">#</a> mutationTimeout</h3> <p>A class instance <code>variable</code> holding an <code>integer</code> number of milliseconds after which a mutation times out.</p> <h3 id="network"><a href="#network" class="header-anchor">#</a> network</h3> <p>A class instance <code>variable</code> holding a <code>string</code> representing the Ethereum network Bitski is connected to.</p> <h3 id="on-event-handler"><a href="#on-event-handler" class="header-anchor">#</a> on(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID, and the second argument is the old ID, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second argument is the old version.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or another provider</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#once-event-handler">once (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="once-event-handler"><a href="#once-event-handler" class="header-anchor">#</a> once(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler. The event is automatically removed once the first <code>event</code> is emitted.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID, and the second argument is the old ID, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second argument is the old version.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="off-event-handler"><a href="#off-event-handler" class="header-anchor">#</a> off(event, handler)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which removes an existing event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>A specific callback <code>function</code> of an event. If not provided, all handlers of the <code>event</code> are removed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-backend-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#once-event-handler">once (event, handler)</a></p> <h3 id="requiredconfirmations"><a href="#requiredconfirmations" class="header-anchor">#</a> requiredConfirmations</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</p> <h3 id="retrygaspricemultiplier"><a href="#retrygaspricemultiplier" class="header-anchor">#</a> retryGasPriceMultiplier</h3> <p>A class instance <code>variable</code> holding a <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation.</p> <h3 id="sandbox"><a href="#sandbox" class="header-anchor">#</a> sandbox</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</p> <h3 id="sign-message"><a href="#sign-message" class="header-anchor">#</a> sign(message)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs a message using <code>signMethod</code> set in provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>message</td> <td>[required] A <code>string</code> representing the message to be signed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A string representing the signature.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="signmethod"><a href="#signmethod" class="header-anchor">#</a> signMethod</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which holds the type of signature that will be used (e.g., when creating claims).</p> <h3 id="unsaferecipientids"><a href="#unsaferecipientids" class="header-anchor">#</a> unsafeRecipientIds</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents smart contract addresses that do not support safe ERC-721 transfers.</p> <h3 id="valueledgersource"><a href="#valueledgersource" class="header-anchor">#</a> valueLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</p> <h3 id="verbose"><a href="#verbose" class="header-anchor">#</a> verbose</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> which represents whether you are in a verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</p> <h2 id="bitski-front-end-provider"><a href="#bitski-front-end-provider" class="header-anchor">#</a> Bitski front-end provider</h2> <p>A <a href="https://www.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski</a> front-end provider is applied for in-browser use. The user will be prompted to create/log in to their Bitski account when creating mutations. The provider automatically establishes a communication channel to Bitski which further performs communication with the Ethereum blockchain. To setup Bitski front-end provider, you first need to create a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">development account</a> on Bitski, you will also need to host a callback page like <a href="https://github.com/BitskiCo/bitski-js/blob/develop/packages/browser/callback.html" target="_self" rel="noopener noreferrer alternate">this</a>, and authorize its URL on previously created development account.</p> <h3 id="installation-2"><a href="#installation-2" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-bitski-frontend-provider
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="bitskiprovider-options-2"><a href="#bitskiprovider-options-2" class="header-anchor">#</a> BitskiProvider(options)</h3> <p>A <code>class</code> providing communication with the Ethereum blockchain through <a href="https://www.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski</a>.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>options.assetLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</td></tr> <tr><td>options.clientId</td> <td>A string representing the Bitski client ID. You get the client ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</td></tr> <tr><td>options.gasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a mutation. It defaults to <code>1.1</code>.</td></tr> <tr><td>options.gatewayConfig.assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>options.gatewayConfig.actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>options.gatewayConfig.valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr> <tr><td>options.mutationTimeout</td> <td>The <code>number</code> of milliseconds after which a mutation times out. Defaults to <code>3600000</code>. You can set it to <code>-1</code> to disable the timeout.</td></tr> <tr><td>options.network</td> <td>A <code>string</code> or instance of <code>BitskiProviderNetwork</code> representing the Ethereum network we will connect to.</td></tr> <tr><td>options.redirectUrl</td> <td>A <code>string</code> representing Bitski redirect URL. For Bitski front-end integration, you will need to create a call back to the website for OAuth2 and host it. Here is an <a href="https://github.com/BitskiCo/bitski-js/blob/develop/packages/browser/callback.html" target="_self" rel="noopener noreferrer alternate">example</a>. The URL to this HTML page also needs to be the app's authorized redirect URL in <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski Developer Portal</a>.</td></tr> <tr><td>options.retryGasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation. It defaults to <code>2</code>.</td></tr> <tr><td>options.requiredConfirmations</td> <td>An <code>integer</code> representing the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</td></tr> <tr><td>options.signMethod</td> <td>An <code>integer</code> representing the signature type. Available options are <code>0</code> (eth_sign) or <code>2</code> (EIP-712) or <code>3</code> (personal_sign). It defaults to <code>0</code>.</td></tr> <tr><td>options.sandbox</td> <td>A <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</td></tr> <tr><td>options.unsafeRecipientIds</td> <td>A list of <code>strings</code> representing smart contract addresses that do not support safe ERC-721 transfers (e.g., CryptoKitties address should be listed here).</td></tr> <tr><td>options.valueLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</td></tr> <tr><td>options.verbose</td> <td>A <code>boolean</code> indicating whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BitskiProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-frontend-provider'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitskiProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    clientId<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    redirectUrl<span class="token operator">:</span> <span class="token string">'https://...'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#bitski-back-end-provider">Bitski back-end provider</a></p> <h3 id="accountid-2"><a href="#accountid-2" class="header-anchor">#</a> accountId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the user's current Ethereum wallet address.</p> <h3 id="assetledgersource-2"><a href="#assetledgersource-2" class="header-anchor">#</a> assetLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</p> <h3 id="buildgatewayconfig-networkkind-2"><a href="#buildgatewayconfig-networkkind-2" class="header-anchor">#</a> buildGatewayConfig(networkKind)</h3> <p>A function that returns the current gateway config based on the deployed gateway smart contracts. Note that config will change based on release versions. If you do not want the smart contract addresses to update automatically, you should not use this function.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>networkKind</td> <td>[required] A <code>number</code> representing the Ethereum network for which we want to get the gateway config.</td></tr></tbody></table> <h3 id="clientid-2"><a href="#clientid-2" class="header-anchor">#</a> clientId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the Bitski client ID. You get the client ID by creating a <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">developer account</a> on Bitski.</p> <h3 id="emit-event-options-2"><a href="#emit-event-options-2" class="header-anchor">#</a> emit(event, ...options);</h3> <p>A <code>synchronous</code> class instance <code>function</code> to manually trigger a provider event.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>options</td> <td>[required] Pass valid current and previous account ID for <code>ACCOUNT_CHANGE</code> event or valid current and previous network versions for <code>NETWORK_CHANGE</code> event.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AccountEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-front-end-provider'</span><span class="token punctuation">;</span>

mutation<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>AccountEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gatewayconfig-2"><a href="#gatewayconfig-2" class="header-anchor">#</a> gatewayConfig</h3> <p>A class instance <code>variable</code> holding a <code>GatewayConfig</code> which represents the configuration for <code>Gateway</code> smart contracts.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr></tbody></table> <h3 id="getavailableaccounts-2"><a href="#getavailableaccounts-2" class="header-anchor">#</a> getAvailableAccounts()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns currently available Ethereum wallet addresses.</p> <p><strong>Result:</strong></p> <p>A list of <code>strings</code> representing Ethereum account IDs.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountIds <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getAvailableAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getconnecteduser"><a href="#getconnecteduser" class="header-anchor">#</a> getConnectedUser()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns data of the currently signed-in Bitski user. Will throw error if no user is signed in.</p> <p><strong>Result:</strong></p> <p>An object representing a Bitski user.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getConnectedUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-options-2"><a href="#getinstance-options-2" class="header-anchor">#</a> getInstance(options)</h3> <p>A static class <code>function</code> that returns a new instance of the BitskiProvider class (alias for <code>new BitskiProvider</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#bitski-provider">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> BitskiProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-frontend-provider'</span><span class="token punctuation">;</span>

<span class="token comment">// create provider instance</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> BitskiProvider<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnetworkversion-2"><a href="#getnetworkversion-2" class="header-anchor">#</a> getNetworkVersion()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the Ethereum network version (e.g., <code>1</code> for Ethereum Mainnet).</p> <p><strong>Result:</strong></p> <p>A <code>string</code> representing the Ethereum network version.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getNetworkVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iscurrentaccount-accountid-2"><a href="#iscurrentaccount-accountid-2" class="header-anchor">#</a> isCurrentAccount(accountId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>accountId</code> matches the currently set account ID.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>accountId</code> matches the currently set account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ethereum wallet address</span>
<span class="token keyword">const</span> walletId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isCurrentAccount</span><span class="token punctuation">(</span>walletId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="issupported-2"><a href="#issupported-2" class="header-anchor">#</a> isSupported()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provider is supported by the environment.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the provider can be used.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="issignedin"><a href="#issignedin" class="header-anchor">#</a> isSignedIn()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when a user is signed into Bitski.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the user is signed into Bitski.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isSignedIn <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isSignedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="isunsaferecipientid-ledgerid-2"><a href="#isunsaferecipientid-ledgerid-2" class="header-anchor">#</a> isUnsafeRecipientId(ledgerId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>id</code> is listed among unsafe recipient IDs on the provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A <code>string</code> representing an address of the ERC-721-related smart contract on the Ethereum blockchain.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>id</code> is an unsafe recipient.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// unsafe recipient address</span>
<span class="token keyword">const</span> criptoKittiesId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isUnsafe <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isUnsafeRecipientId</span><span class="token punctuation">(</span>criptoKittiesId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#unsaferecipientids">unsafeRecipientIds</a></p> <h3 id="log-message-2"><a href="#log-message-2" class="header-anchor">#</a> log(message)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which logs message to console if verbose mode is active, otherwise it does nothing.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>provider<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mutationtimeout-2"><a href="#mutationtimeout-2" class="header-anchor">#</a> mutationTimeout</h3> <p>A class instance <code>variable</code> holding an <code>integer</code> number of milliseconds after which a mutation times out.</p> <h3 id="network-2"><a href="#network-2" class="header-anchor">#</a> network</h3> <p>A class instance <code>variable</code> holding a <code>string</code> or instance of <code>BitskiProviderNetwork</code> representing the Ethereum network Bitski is connected to.</p> <p><code>BitskiProviderNetwork</code> is defined as:</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>rpcUrl</td> <td>A <code>string</code> representing a URL to RPC provider.</td></tr> <tr><td>chainId</td> <td>A <code>number</code> representing the ID of the Ethereum chain.</td></tr></tbody></table> <h3 id="on-event-handler-2"><a href="#on-event-handler-2" class="header-anchor">#</a> on(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second argument is the old ID, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second argument is the old version.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-frontend-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or another provider</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#once-event-handler">once (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="once-event-handler-2"><a href="#once-event-handler-2" class="header-anchor">#</a> once(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler. The event is automatically removed once the first <code>event</code> is emitted.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second argument is the old ID, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second argument is the old version.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-frontend-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="off-event-handler-2"><a href="#off-event-handler-2" class="header-anchor">#</a> off(event, handler)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which removes an existing event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>A specific callback <code>function</code> of an event. If not provided, all handlers of the <code>event</code> are removed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-bitski-frontend-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#once-event-handler">once (event, handler)</a></p> <h3 id="redirecturl"><a href="#redirecturl" class="header-anchor">#</a> redirectUrl</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the Bitski redirect URL. For Bitski front-end integration, you will need to create a call back to the website for OAuth2 and host it. Here is an <a href="https://github.com/BitskiCo/bitski-js/blob/develop/packages/browser/callback.html" target="_self" rel="noopener noreferrer alternate">example</a>. The URL to this HTML page also needs to be the app's authorized redirect URL in <a href="https://developer.bitski.com/" target="_self" rel="noopener noreferrer alternate">Bitski Developer Portal</a>.</p> <h3 id="requiredconfirmations-2"><a href="#requiredconfirmations-2" class="header-anchor">#</a> requiredConfirmations</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</p> <h3 id="retrygaspricemultiplier-2"><a href="#retrygaspricemultiplier-2" class="header-anchor">#</a> retryGasPriceMultiplier</h3> <p>A class instance <code>variable</code> holding a <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation.</p> <h3 id="sandbox-2"><a href="#sandbox-2" class="header-anchor">#</a> sandbox</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</p> <h3 id="sign-message-2"><a href="#sign-message-2" class="header-anchor">#</a> sign(message)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs a message using <code>signMethod</code> set in provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>message</td> <td>[required] A <code>string</code> representing the message to be signed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A string representing the signature.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="signin"><a href="#signin" class="header-anchor">#</a> signIn()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs in the user and authorizes the provider.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Calling this method should always be performed by a click handler (user-generated request) to prevent the pop-up from getting blocked by the browser.</p></div> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">signIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="signmethod-2"><a href="#signmethod-2" class="header-anchor">#</a> signMethod</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which holds a type of signature that will be used (e.g., when creating claims).</p> <h3 id="signout"><a href="#signout" class="header-anchor">#</a> signOut()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs out the user and revokes provider authorization.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">signOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="unsaferecipientids-2"><a href="#unsaferecipientids-2" class="header-anchor">#</a> unsafeRecipientIds</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents smart contract addresses that do not support safe ERC-721 transfers.</p> <h3 id="valueledgersource-2"><a href="#valueledgersource-2" class="header-anchor">#</a> valueLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</p> <h3 id="verbose-2"><a href="#verbose-2" class="header-anchor">#</a> verbose</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> which represents whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</p> <h2 id="metamask-provider"><a href="#metamask-provider" class="header-anchor">#</a> MetaMask provider</h2> <p>A MetaMask provider is applied for in-browser use. The user should have <a href="https://metamask.io/" target="_self" rel="noopener noreferrer alternate">MetaMask</a> installed. The provider automatically establishes a communication channel to MetaMask which further performs communication with the Ethereum blockchain.</p> <h3 id="installation-3"><a href="#installation-3" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-metamask-provider
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="metamaskprovider-options"><a href="#metamaskprovider-options" class="header-anchor">#</a> MetamaskProvider(options)</h3> <p>A <code>class</code> providing communication with the Ethereum blockchain through <a href="https://metamask.io/" target="_self" rel="noopener noreferrer alternate">MetaMask</a>.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>options.assetLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</td></tr> <tr><td>options.gasPriceMultiplier</td> <td>A <code>number</code> represents a multiplier of the current gas price when performing a mutation. It defaults to <code>1.1</code>.</td></tr> <tr><td>options.gatewayConfig.assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>options.gatewayConfig.actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>options.gatewayConfig.valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr> <tr><td>options.mutationTimeout</td> <td>The <code>number</code> of milliseconds after which a mutation times out. Defaults to <code>3600000</code>. You can set it to <code>-1</code> to disable the timeout.</td></tr> <tr><td>options.retryGasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation. It defaults to <code>2</code>.</td></tr> <tr><td>options.requiredConfirmations</td> <td>An <code>integer</code> representing the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</td></tr> <tr><td>options.signMethod</td> <td>An <code>integer</code> representing the signature type. Available options are <code>0</code> (eth_sign) or <code>2</code> (EIP-712) or <code>3</code> (personal_sign). It defaults to <code>0</code>.</td></tr> <tr><td>options.sandbox</td> <td>A <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</td></tr> <tr><td>options.unsafeRecipientIds</td> <td>A list of <code>strings</code> representing smart contract addresses that do not support safe ERC-721 transfers (e.g., CryptoKitties address should be listed here).</td></tr> <tr><td>options.valueLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</td></tr> <tr><td>options.verbose</td> <td>A <code>boolean</code> indicating whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#http-provider">HttpProvider</a></p> <h3 id="accountid-3"><a href="#accountid-3" class="header-anchor">#</a> accountId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the user's current Ethereum wallet address.</p> <h3 id="assetledgersource-3"><a href="#assetledgersource-3" class="header-anchor">#</a> assetLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</p> <h3 id="buildgatewayconfig-networkkind-3"><a href="#buildgatewayconfig-networkkind-3" class="header-anchor">#</a> buildGatewayConfig(networkKind)</h3> <p>A function that returns the current gateway config based on the deployed gateway smart contracts. Note that config will change based on release versions. If you do not want the smart contract addresses to update automatically, you should not use this function.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>networkKind</td> <td>[required] A <code>number</code> representing the Ethereum network for which we want to get the gateway config.</td></tr></tbody></table> <h3 id="emit-event-options-3"><a href="#emit-event-options-3" class="header-anchor">#</a> emit(event, ...options);</h3> <p>A <code>synchronous</code> class instance <code>function</code> to manually trigger a provider event.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>options</td> <td>[required] Pass valid current and previous account ID for <code>ACCOUNT_CHANGE</code> event or valid current and previous network version for <code>NETWORK_CHANGE</code> event.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AccountEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

mutation<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>AccountEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="enable"><a href="#enable" class="header-anchor">#</a> enable()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which authorizes the provider and connects it with the website.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="gatewayconfig-3"><a href="#gatewayconfig-3" class="header-anchor">#</a> gatewayConfig</h3> <p>A class instance <code>variable</code> holding a <code>GatewayConfig</code> which represents the configuration for <code>Gateway</code> smart contracts.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr></tbody></table> <h3 id="getavailableaccounts-3"><a href="#getavailableaccounts-3" class="header-anchor">#</a> getAvailableAccounts()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns currently available Ethereum wallet addresses.</p> <p><strong>Result:</strong></p> <p>A list of <code>strings</code> representing Ethereum account IDs.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountIds <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getAvailableAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-options-3"><a href="#getinstance-options-3" class="header-anchor">#</a> getInstance(options)</h3> <p>A static class <code>function</code> that returns a new instance of the MetamaskProvider class (alias for <code>new MetamaskProvider</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#metamask-provider">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>

<span class="token comment">// create provider instance</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> MetamaskProvider<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnetworkversion-3"><a href="#getnetworkversion-3" class="header-anchor">#</a> getNetworkVersion()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the Ethereum network version (e.g., <code>1</code> for Ethereum Mainnet).</p> <p><strong>Result:</strong></p> <p>A <code>string</code> representing the Ethereum network version.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getNetworkVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iscurrentaccount-accountid-3"><a href="#iscurrentaccount-accountid-3" class="header-anchor">#</a> isCurrentAccount(accountId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>accountId</code> matches the currently set account ID.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>accountId</code> matches the currently set account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ethereum wallet address</span>
<span class="token keyword">const</span> walletId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isCurrentAccount</span><span class="token punctuation">(</span>walletId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="isenabled"><a href="#isenabled" class="header-anchor">#</a> isEnabled()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>true</code> when the provider is authorized by the website.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> that tells whether the provider is enabled.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isEnabled <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#enable">enable</a>, <a href="#is-supported">isSupported</a></p> <h3 id="issupported-3"><a href="#issupported-3" class="header-anchor">#</a> isSupported()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provider is supported by the environment.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the provider can be used.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#is-enabled">isEnabled</a></p> <h3 id="isunsaferecipientid-ledgerid-3"><a href="#isunsaferecipientid-ledgerid-3" class="header-anchor">#</a> isUnsafeRecipientId(ledgerId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>id</code> is listed among unsafe recipient IDs on the provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A <code>string</code> representing an address of the ERC-721-related smart contract on the Ethereum blockchain.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>id</code> is an unsafe recipient.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// unsafe recipient address</span>
<span class="token keyword">const</span> criptoKittiesId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isUnsafe <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isUnsafeRecipientId</span><span class="token punctuation">(</span>criptoKittiesId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#unsaferecipientids">unsafeRecipientIds</a></p> <h3 id="log-message-3"><a href="#log-message-3" class="header-anchor">#</a> log(message)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which logs message to console if verbose mode is active, otherwise it does nothing.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>provider<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mutationtimeout-3"><a href="#mutationtimeout-3" class="header-anchor">#</a> mutationTimeout</h3> <p>A class instance <code>variable</code> holding an <code>integer</code> number of milliseconds after which a mutation times out.</p> <h3 id="on-event-handler-3"><a href="#on-event-handler-3" class="header-anchor">#</a> on(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second is the old one, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second is the old one.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#once-event-handler">once (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="once-event-handler-3"><a href="#once-event-handler-3" class="header-anchor">#</a> once(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler. The event is automatically removed once the first <code>event</code> is emitted.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second is the old one, and when the <code>event</code> equals <code>NETWORK_CHANGE</code>, the first argument is a new network version and the second is the old one.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="off-event-handler-3"><a href="#off-event-handler-3" class="header-anchor">#</a> off(event, handler)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which removes an existing event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>A specific callback <code>function</code> of an event. If not provided, all handlers of the <code>event</code> are removed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#once-event-handler">once (event, handler)</a></p> <h3 id="requiredconfirmations-3"><a href="#requiredconfirmations-3" class="header-anchor">#</a> requiredConfirmations</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</p> <h3 id="retrygaspricemultiplier-3"><a href="#retrygaspricemultiplier-3" class="header-anchor">#</a> retryGasPriceMultiplier</h3> <p>A class instance <code>variable</code> holding a <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation.</p> <h3 id="sandbox-3"><a href="#sandbox-3" class="header-anchor">#</a> sandbox</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</p> <h3 id="sign-message-3"><a href="#sign-message-3" class="header-anchor">#</a> sign(message)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs a message using <code>signMethod</code> set in provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>message</td> <td>[required] A <code>string</code> representing the message to be signed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A string representing the signature.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="signmethod-3"><a href="#signmethod-3" class="header-anchor">#</a> signMethod</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which holds a type of signature that will be used (e.g., when creating claims).</p> <h3 id="unsaferecipientids-3"><a href="#unsaferecipientids-3" class="header-anchor">#</a> unsafeRecipientIds</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents smart contract addresses that do not support safe ERC-721 transfers.</p> <h3 id="valueledgersource-3"><a href="#valueledgersource-3" class="header-anchor">#</a> valueLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</p> <h3 id="verbose-3"><a href="#verbose-3" class="header-anchor">#</a> verbose</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> which represents whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</p> <h2 id="http-provider"><a href="#http-provider" class="header-anchor">#</a> HTTP provider</h2> <p>HTTP provider uses HTTP and HTTPS protocol for communication with the Ethereum node. It is used mostly for querying and mutating data but does not support subscriptions.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Don't forget to manually unlock your account before performing a mutation.</p></div> <h3 id="installation-4"><a href="#installation-4" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-http-provider
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="httpprovider-options"><a href="#httpprovider-options" class="header-anchor">#</a> HttpProvider(options)</h3> <p>A <code>class</code> providing communication with the Ethereum blockchain using the HTTP/HTTPS protocol.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>options.accountId</td> <td>A <code>string</code> representing the Ethereum account that will perform actions.</td></tr> <tr><td>options.assetLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-721-related smart contract definition file.</td></tr> <tr><td>options.cache</td> <td>A <code>string</code> representing request cache type. It defaults to <code>no-cache</code>. Please see more details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_self" rel="noopener noreferrer alternate">here</a>.</td></tr> <tr><td>options.credentials</td> <td>A <code>string</code> representing request credentials. It defaults to <code>omit</code>. Please see more details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_self" rel="noopener noreferrer alternate">here</a>.</td></tr> <tr><td>options.gasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a mutation. It defaults to <code>1.1</code>.</td></tr> <tr><td>options.gatewayConfig.assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>options.gatewayConfig.actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>options.gatewayConfig.valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr> <tr><td>options.headers</td> <td>An <code>object</code> of request headers. Please see more details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_self" rel="noopener noreferrer alternate">here</a>.</td></tr> <tr><td>options.mode</td> <td>A <code>string</code> representing request mode. It defaults to <code>same-origin</code>. Please see more details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_self" rel="noopener noreferrer alternate">here</a>.</td></tr> <tr><td>options.mutationTimeout</td> <td>The <code>number</code> of milliseconds after which a mutation times out. Defaults to <code>3600000</code>. You can set it to <code>-1</code> to disable the timeout.</td></tr> <tr><td>options.redirect</td> <td>A <code>string</code> representing request redirect mode. It defaults to <code>follow</code>. Please see more details <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_self" rel="noopener noreferrer alternate">here</a>.</td></tr> <tr><td>options.retryGasPriceMultiplier</td> <td>A <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation. It defaults to <code>2</code>.</td></tr> <tr><td>options.requiredConfirmations</td> <td>An <code>integer</code> representing the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</td></tr> <tr><td>options.signMethod</td> <td>An <code>integer</code> representing the signature type. Available options are <code>0</code> (eth_sign) or <code>2</code> (EIP-712) or <code>3</code> (personal_sign). It defaults to <code>0</code>.</td></tr> <tr><td>options.sandbox</td> <td>A <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</td></tr> <tr><td>options.unsafeRecipientIds</td> <td>A list of <code>strings</code> representing smart contract addresses that do not support safe ERC-721 transfers.</td></tr> <tr><td>options.url</td> <td>[required] A <code>string</code> representing the URL to the Ethereum node's JSON RPC.</td></tr> <tr><td>options.valueLedgerSource</td> <td>A <code>string</code> representing the URL to the compiled ERC-20-related smart contract definition file.</td></tr> <tr><td>options.verbose</td> <td>A <code>boolean</code> indicating whether you are in verbose mode. Verbose mode means the console will provide more detailed information about the current state. It defaults to <code>false</code>.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HttpProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-http-provider'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpProvider</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    accountId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">'https://connection-to-ethereum-rpc-node/'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Please note, when using <a href="https://infura.io/" target="_self" rel="noopener noreferrer alternate">Infura</a>, only queries are supported.</p></div> <p><strong>See also:</strong></p> <p><a href="#metamask-provider">MetamaskProvider</a></p> <h3 id="assetledgersource-4"><a href="#assetledgersource-4" class="header-anchor">#</a> assetLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-721-related smart contract definition file. This file is used when deploying new asset ledgers to the network.</p> <h3 id="buildgatewayconfig-networkkind-4"><a href="#buildgatewayconfig-networkkind-4" class="header-anchor">#</a> buildGatewayConfig(networkKind)</h3> <p>A function that returns the current gateway config based on the deployed gateway smart contracts. Note that config will change based on release versions. If you do not want the smart contract addresses to update automatically, you should not use this function.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>networkKind</td> <td>[required] A <code>number</code> representing the Ethereum network for which we want to get the gateway config.</td></tr></tbody></table> <h3 id="getavailableaccounts-4"><a href="#getavailableaccounts-4" class="header-anchor">#</a> getAvailableAccounts()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns currently available Ethereum wallet addresses.</p> <p><strong>Result:</strong></p> <p>A list of <code>strings</code> representing Ethereum account IDs.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountIds <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getAvailableAccounts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-options-4"><a href="#getinstance-options-4" class="header-anchor">#</a> getInstance(options)</h3> <p>A static class <code>function</code> that returns a new instance of the HttpProvider class (alias for <code>new HttpProvider</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#http-provider">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HttpProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-http-provider'</span><span class="token punctuation">;</span>

<span class="token comment">// create provider instance</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> HttpProvider<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getnetworkversion-4"><a href="#getnetworkversion-4" class="header-anchor">#</a> getNetworkVersion()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the Ethereum network version (e.g., <code>1</code> for Ethereum Mainnet).</p> <p><strong>Result:</strong></p> <p>A <code>string</code> representing the Ethereum network version.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">getNetworkVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="iscurrentaccount-accountid-4"><a href="#iscurrentaccount-accountid-4" class="header-anchor">#</a> isCurrentAccount(accountId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>accountId</code> matches the currently set account ID.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>accountId</code> matches the currently set account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// ethereum wallet address</span>
<span class="token keyword">const</span> walletId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isCurrentAccount</span><span class="token punctuation">(</span>walletId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="issupported-4"><a href="#issupported-4" class="header-anchor">#</a> isSupported()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provider is supported by the environment.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the provider can be used.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isSupported <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isSupported</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="isunsaferecipientid-ledgerid-4"><a href="#isunsaferecipientid-ledgerid-4" class="header-anchor">#</a> isUnsafeRecipientId(ledgerId)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when the provided <code>ledgerId</code> is listed among unsafe recipient IDs on the provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A <code>string</code> representing an address of the ERC-721-related smart contract on the Ethereum blockchain.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>id</code> is an unsafe recipient.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// unsafe recipient address</span>
<span class="token keyword">const</span> criptoKittiesId <span class="token operator">=</span> <span class="token string">'0x06012c8cf97bead5deae237070f9587f8e7a266d'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isUnsafe <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">isUnsafeRecipientId</span><span class="token punctuation">(</span>criptoKittiesId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#unsaferecipientids-2">unsafeRecipientIds</a></p> <h3 id="log-message-4"><a href="#log-message-4" class="header-anchor">#</a> log(message)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which logs message to console if verbose mode is active, otherwise it does nothing.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>provider<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="mutationtimeout-4"><a href="#mutationtimeout-4" class="header-anchor">#</a> mutationTimeout</h3> <p>A class instance <code>variable</code> holding an <code>integer</code> number of milliseconds after which a mutation times out.</p> <h3 id="on-event-handler-4"><a href="#on-event-handler-4" class="header-anchor">#</a> on(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second is the old one.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-http-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">ACCOUNT_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">accountId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Account has changed'</span><span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#once-event-handler">once (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="once-event-handler-4"><a href="#once-event-handler-4" class="header-anchor">#</a> once(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler. The event is automatically removed once the first <code>event</code> is emitted.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ACCOUNT_CHANGE</code>, the first argument is a new account ID and the second is the old one.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-http-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">ACCOUNT_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">accountId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Account has changed'</span><span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="off-event-handler-4"><a href="#off-event-handler-4" class="header-anchor">#</a> off(event, handler)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which removes an existing event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#provider-events">provider event</a> name.</td></tr> <tr><td>handler</td> <td>A specific callback <code>function</code> of an event. If not provided, all handlers of the <code>event</code> are removed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same provider class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ProviderEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-http-provider'</span><span class="token punctuation">;</span>

provider<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#once-event-handler">once (event, handler)</a></p> <h3 id="requiredconfirmations-4"><a href="#requiredconfirmations-4" class="header-anchor">#</a> requiredConfirmations</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the number of confirmations needed for mutations to be considered confirmed. It defaults to <code>1</code>.</p> <h3 id="retrygaspricemultiplier-4"><a href="#retrygaspricemultiplier-4" class="header-anchor">#</a> retryGasPriceMultiplier</h3> <p>A class instance <code>variable</code> holding a <code>number</code> representing a multiplier of the current gas price when performing a retry action on mutation.</p> <h3 id="sandbox-4"><a href="#sandbox-4" class="header-anchor">#</a> sandbox</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> indicating whether you are in sandbox mode. Sandbox mode means you don't make an actual mutation to the blockchain, but you only check whether a mutation would succeed or not.</p> <h3 id="sign-message-4"><a href="#sign-message-4" class="header-anchor">#</a> sign(message)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which signs a message using <code>signMethod</code> set in provider.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>message</td> <td>[required] A <code>string</code> representing the message to be signed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A string representing the signature.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="signmethod-4"><a href="#signmethod-4" class="header-anchor">#</a> signMethod</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which holds a type of signature that will be used (e.g., when creating claims).</p> <h3 id="unsaferecipientids-4"><a href="#unsaferecipientids-4" class="header-anchor">#</a> unsafeRecipientIds</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents smart contract addresses that do not support safe ERC-721 transfers.</p> <h3 id="valueledgersource-4"><a href="#valueledgersource-4" class="header-anchor">#</a> valueLedgerSource</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents the URL to the compiled ERC-20-related smart contract definition file. This file is used when deploying new value ledgers to the network.</p> <h3 id="verbose-4"><a href="#verbose-4" class="header-anchor">#</a> verbose</h3> <p>A class instance <code>variable</code> holding a <code>boolean</code> which represents whether you are in verbose mode. Verbose mode means you will get more detailed information in the console about what is going on. It defaults to <code>false</code>.</p> <h2 id="provider-events"><a href="#provider-events" class="header-anchor">#</a> Provider events</h2> <p>We can listen to different provider events. Note that not all the providers are able to emit all the events listed here.</p> <p><strong>Options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>ACCOUNT_CHANGE</td> <td>accountChange</td> <td>Triggered when an <code>accountId</code> is changed.</td></tr> <tr><td>NETWORK_CHANGE</td> <td>networkChange</td> <td>Triggered when network version is changed.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">ACCOUNT_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">accountId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Account has changed'</span><span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
provider<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>ProviderEvent<span class="token punctuation">.</span><span class="token constant">NETWORK_CHANGE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">networkVersion</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Network has changed'</span><span class="token punctuation">,</span> networkVersion<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="mutation"><a href="#mutation" class="header-anchor">#</a> Mutation</h2> <p>The 0xcert Framework performs mutations for any request that changes the state on the Ethereum blockchain.</p> <h3 id="mutation-provider-mutationid-context"><a href="#mutation-provider-mutationid-context" class="header-anchor">#</a> Mutation(provider, mutationId, context?)</h3> <p>A <code>class</code> which handles transaction-related operations on the Ethereum blockchain.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>context</td> <td>An instance of <code>AssetLedger</code>, <code>ValueLedger</code> or <code>Gateway</code>. The context of a mutation informs of the kind of a mutation and will be able to parse <code>Logs</code> based on that information. If context is not provided, the logs will be left blank.</td></tr> <tr><td>mutationId</td> <td>[required] A <code>string</code> representing a hash string of an Ethereum transaction.</td></tr> <tr><td>provider</td> <td>[required] An instance of provider.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Mutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> mutationId <span class="token operator">=</span> <span class="token string">'0x767857798ea7c8d21ad72c4d7e054ed45ab5d177c06baa2183dbfc3b61926963'</span><span class="token punctuation">;</span>

<span class="token comment">// create mutation instance</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mutation</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> mutationId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cancel"><a href="#cancel" class="header-anchor">#</a> cancel()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which attempts to cancel a mutation. You can only cancel a mutation that has not yet been accepted onto the blockchain. Canceling works by overwriting a pending mutation (using the same <a href="https://kb.myetherwallet.com/en/transactions/what-is-nonce/" target="_self" rel="noopener noreferrer alternate">nonce</a>) with a new mutation that performs no action, which could also lead the <code>cancel</code> function to fail. The <code>cancel</code> function will throw an error if the mutation has already been accepted onto the blockchain or if you are not the originator of the mutation you want to cancel.</p> <h3 id="complete"><a href="#complete" class="header-anchor">#</a> complete()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which waits until a mutation reaches a specified number of confirmations.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Number of required confirmations is configurable through the provider instance.</p></div> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// wait until confirmed</span>
<span class="token keyword">await</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#forget">forget()</a></p> <h3 id="confirmations"><a href="#confirmations" class="header-anchor">#</a> confirmations</h3> <p>A class instance <code>variable</code> holding an <code>integer</code> number of confirmations reached. Default is <code>0</code>.</p> <h3 id="emit-event-options-4"><a href="#emit-event-options-4" class="header-anchor">#</a> emit(event, options);</h3> <p>A <code>synchronous</code> class instance <code>function</code> to manually trigger a mutation event.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#mutation-events">mutation event</a> name.</td></tr> <tr><td>options</td> <td>For <code>ERROR</code> event, an instance of an <code>Error</code> must be provided.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MutationEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

mutation<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>MutationEvent<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Unhandled error'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="forget"><a href="#forget" class="header-anchor">#</a> forget()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which stops listening for confirmations which causes the <code>complete()</code> function to resolve immediately.</p> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>mutation<span class="token punctuation">.</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="id"><a href="#id" class="header-anchor">#</a> id</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents a hash of an Ethereum transaction.</p> <h3 id="iscompleted"><a href="#iscompleted" class="header-anchor">#</a> isCompleted()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> if a mutation has reached the required number of confirmations.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> telling whether the mutation has been completed.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>mutation<span class="token punctuation">.</span><span class="token function">isCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#is-pending">isPending</a></p> <h3 id="ispending"><a href="#ispending" class="header-anchor">#</a> isPending()</h3> <p>A <code>synchronous</code> class instance <code>function</code> which returns <code>true</code> when a mutation is in the process of completion.</p> <p><strong>Result:</strong></p> <p>A <code>boolean</code> telling whether the mutation is waiting to be confirmed.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>mutation<span class="token punctuation">.</span><span class="token function">isPending</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#is-pending">isPending</a></p> <h3 id="logs"><a href="#logs" class="header-anchor">#</a> logs</h3> <p>A class instance <code>variable</code> holding an <code>array</code> of logs. It only resolves if you called either <code>complete()</code> or <code>resolve()</code> function upon <code>Mutation</code> and if the <code>Mutation</code> context is set. Logs are dynamically defined and represent <code>Events</code> that were triggered by the smart contract.</p> <h3 id="on-event-handler-5"><a href="#on-event-handler-5" class="header-anchor">#</a> on(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#mutation-events">mutation event</a> name.</td></tr> <tr><td>handler</td> <td>[required] A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ERROR</code>, the first argument is an <code>Error</code>, otherwise, the current <code>Mutation</code> instance is received.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MutationEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

mutation<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MutationEvent<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mutation has been completed!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#once-event-handler">once(event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="once-event-handler-5"><a href="#once-event-handler-5" class="header-anchor">#</a> once(event, handler);</h3> <p>A <code>synchronous</code> class instance <code>function</code> which attaches a new event handler. The event is automatically removed once the first <code>event</code> is emitted.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#mutation-events">mutation event</a> name.</td></tr> <tr><td>handler</td> <td>A callback <code>function</code> which is triggered on each <code>event</code>. When the <code>event</code> equals <code>ERROR</code>, the first argument is an <code>Error</code>, otherwise, the current <code>Mutation</code> instance is received.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MutationEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

mutation<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span>MutationEvent<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mutation has been completed!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#off-event-handler">off (event, handler)</a></p> <h3 id="off-event-handler-5"><a href="#off-event-handler-5" class="header-anchor">#</a> off(event, handler)</h3> <p>A <code>synchronous</code> class instance <code>function</code> which removes an existing event.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>event</td> <td>[required] A <code>string</code> representing a <a href="/api/ethereum.html#mutation-events">mutation event</a> name.</td></tr> <tr><td>handler</td> <td>A specific callback <code>function</code> of an event. If not provided, all handlers of the <code>event</code> are removed.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MutationEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span> <span class="token comment">// or HTTP provider</span>

mutation<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>MutationEvent<span class="token punctuation">.</span><span class="token constant">ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#on-event-handler">on (event, handler)</a>, <a href="#once-event-handler">once (event, handler)</a></p> <h3 id="receiverid"><a href="#receiverid" class="header-anchor">#</a> receiverId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents an Ethereum account address that plays the role of a receiver.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>When you are deploying a new ledger, this variable represents the ledger ID and remains <code>null</code> until a mutation is completed.</p></div> <h3 id="retry"><a href="#retry" class="header-anchor">#</a> retry()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which resubmits the same mutation to the blockchain at a higher price. Since the speed of accepting mutations onto the blockchain depends on the current network state, a mutation could remain unconfirmed for a while. In that case, you can retry submitting the same mutation at an increased price to speed up its acceptance onto the blockchain. The price is determined by the current network price, multiplied by <code>retryGasPriceMultiplier</code> parameter on the provider (which defaults to <code>2</code>). Note that this method will throw an error if the mutation has already been accepted onto the blockchain.</p> <h3 id="resolve"><a href="#resolve" class="header-anchor">#</a> resolve()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which resolves the current mutation status.</p> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// resolves current mutation</span>
<span class="token keyword">await</span> mutation<span class="token punctuation">.</span><span class="token function">revoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#complete">complete()</a></p> <h3 id="senderid"><a href="#senderid" class="header-anchor">#</a> senderId</h3> <p>A class instance <code>variable</code> holding a <code>string</code> which represents an Ethereum account address that plays the role of a sender.</p> <h2 id="mutation-events"><a href="#mutation-events" class="header-anchor">#</a> Mutation events</h2> <p>We can listen to different mutation events which are emitted by the mutation in the process of completion.</p> <p><strong>Options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>COMPLETE</td> <td>complete</td> <td>Triggered when a mutation reaches required confirmations.</td></tr> <tr><td>CONFIRM</td> <td>confirm</td> <td>Triggered on each confirmation until the required confirmations are reached.</td></tr> <tr><td>ERROR</td> <td>error</td> <td>Triggered on mutation error.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code>mutation<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>MutationEvent<span class="token punctuation">.</span><span class="token constant">COMPLETE</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mutation has been completed!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="asset-ledger"><a href="#asset-ledger" class="header-anchor">#</a> Asset ledger</h2> <p>Asset ledger represents ERC-721-related smart contract on the Ethereum blockchain.</p> <h3 id="installation-5"><a href="#installation-5" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-asset-ledger
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="assetledger-provider-ledgerid"><a href="#assetledger-provider-ledgerid" class="header-anchor">#</a> AssetLedger(provider, ledgerId)</h3> <p>A <code>class</code> which represents a smart contract on the Ethereum blockchain.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A <code>string</code> representing an address of the ERC-721-related smart contract on the Ethereum blockchain.</td></tr> <tr><td>provider</td> <td>[required] An instance of provider.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AssetLedger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ledgerId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// create ledger instance</span>
<span class="token keyword">const</span> ledger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AssetLedger</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> ledgerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="approveaccount-assetid-accountid"><a href="#approveaccount-assetid-accountid" class="header-anchor">#</a> approveAccount(assetId, accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which approves a third-party <code>accountId</code> to take over a specific <code>assetId</code>. This function succeeds only when performed by the asset's owner.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Only one account per <code>assetId</code> can be approved at the same time, thus running this function multiple times will override the previously set data.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>accountId</td> <td>[required] A <code>string</code> representing the new owner's Ethereum account address or an instance of the <code>Gateway</code> class.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">approveAccount</span><span class="token punctuation">(</span>assetId<span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disapprove-account">disapproveAccount</a>, <a href="#approve-operator">approveOperator</a></p> <h3 id="approveoperator-accountid"><a href="#approveoperator-accountid" class="header-anchor">#</a> approveOperator(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which approves the third-party <code>accountId</code> to take over the management of all the assets of the account that performed this mutation.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Multiple operators can exist.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing an Ethereum account address that will receive new management permissions on this ledger.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">approveOperator</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disapprove-operator">disapproveOperator</a>, <a href="#approve-account">approveAccount</a></p> <h3 id="createasset-recipe"><a href="#createasset-recipe" class="header-anchor">#</a> createAsset(recipe)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which creates a new asset on the Ethereum blockchain.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>CREATE_ASSET</code> ledger ability is needed to perform this function.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>recipe.id</td> <td>[required] A <code>string</code> representing a unique asset ID.</td></tr> <tr><td>recipe.imprint</td> <td>[required] A <code>string</code> representing asset imprint generated by using <code>Cert</code> class.</td></tr> <tr><td>recipe.receiverId</td> <td>[required] A <code>string</code> representing an Ethereum account address that will receive the new asset.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> asset <span class="token operator">=</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
    imprint<span class="token operator">:</span> <span class="token string">'d747e6ffd1aa3f83efef2931e3cc22c653ea97a32c1ee7289e4966b6964ecdfb'</span><span class="token punctuation">,</span>
    receiverId<span class="token operator">:</span> <span class="token string">'0xF9196F9f176fd2eF9243E8960817d5FbE63D79aa'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">createAsset</span><span class="token punctuation">(</span>asset<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#cert">Cert</a></p> <h3 id="deploy-provider-recipe"><a href="#deploy-provider-recipe" class="header-anchor">#</a> deploy(provider, recipe)</h3> <p>An <code>asynchronous</code> static class <code>function</code> which deploys a new asset ledger to the Ethereum blockchain.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>All ledger abilities are automatically granted to the account that performs this method.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>provider</td> <td>[required] An instance of provider.</td></tr> <tr><td>recipe.name</td> <td>[required] A <code>string</code> representing asset ledger name.</td></tr> <tr><td>recipe.symbol</td> <td>[required] A <code>string</code> representing asset ledger symbol.</td></tr> <tr><td>recipe.uriPrefix</td> <td>[required] A <code>string</code> representing prefix of asset URI.</td></tr> <tr><td>recipe.uriPostfix</td> <td>[required] A <code>string</code> representing postfix of asset URI.</td></tr> <tr><td>recipe.schemaId</td> <td>[required] A <code>string</code> representing data schema ID.</td></tr> <tr><td>recipe.capabilities</td> <td>A list of <code>integers</code> which represent ledger capabilities.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AssetLedger<span class="token punctuation">,</span> AssetLedgerCapability <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> capabilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    AssetLedgerCapability<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Math Course Certificate'</span><span class="token punctuation">,</span>
    <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token string">'MCC'</span><span class="token punctuation">,</span>
    uriPrefix<span class="token operator">:</span> <span class="token string">'https://example.com/assets/'</span><span class="token punctuation">,</span>
    uriPostfix<span class="token operator">:</span> <span class="token string">'.json'</span><span class="token punctuation">,</span>
    schemaId<span class="token operator">:</span> <span class="token string">'3f4a0870cd6039e6c987b067b0d28de54efea17449175d7a8cd6ec10ab23cc5d'</span><span class="token punctuation">,</span> <span class="token comment">// base asset schemaId</span>
    capabilities<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> AssetLedger<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> recipe<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait until first confirmation</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="destroyasset-assetid"><a href="#destroyasset-assetid" class="header-anchor">#</a> destroyAsset(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which destroys a specific <code>assetId</code> on the Ethereum blockchain. The asset is removed from the account and all queries about it will be invalid. The function succeeds only when performed by the asset's owner. This function is similar to <code>revokeAsset</code> but it differs in who can trigger it.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>DESTROY_ASSET</code> ledger capability is needed to perform this function.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing the asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">destroyAsset</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#revokeasset-assetid">revokeAsset</a></p> <h3 id="disapproveaccount-assetid"><a href="#disapproveaccount-assetid" class="header-anchor">#</a> disapproveAccount(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which removes the ability of the currently set third-party account to take over a specific <code>assetId</code>. This function succeeds only when performed by the asset's owner.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing the asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">disapproveAccount</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disapprove-operator">disapproveOperator</a>, <a href="#approve-account">approveAccount</a></p> <h3 id="disapproveoperator-accountid"><a href="#disapproveoperator-accountid" class="header-anchor">#</a> disapproveOperator(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which removes the third-party <code>accountId</code> the ability of managing assets of the account that performed this mutation.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the new Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">disapproveOperator</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disapprove-account">disapproveAccount</a>, <a href="#approve-operator">approveOperator</a></p> <h3 id="disabletransfers"><a href="#disabletransfers" class="header-anchor">#</a> disableTransfers()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which disables all asset transfers.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>TOGGLE_TRANSFERS</code> ledger ability and <code>TOGGLE_TRANSFERS</code> ledger capability are required to perform this function.</p></div> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">disableTransfers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#enable-transfer">enableTransfers</a></p> <h3 id="enabletransfers"><a href="#enabletransfers" class="header-anchor">#</a> enableTransfers()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which enables all asset transfers.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>TOGGLE_TRANSFERS</code> ledger ability and <code>TOGGLE_TRANSFERS</code> ledger capability are required to perform this function.</p></div> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">enableTransfers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disable-transfers">disableTransfers</a></p> <h3 id="getabilities-accountid"><a href="#getabilities-accountid" class="header-anchor">#</a> getAbilities(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>accountId</code> abilities.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address for which we want to get abilities.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An <code>array</code> of <code>integer</code> numbers representing account abilities.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> abilities <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getAbilities</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getaccountassetidat-accountid-index"><a href="#getaccountassetidat-accountid-index" class="header-anchor">#</a> getAccountAssetIdAt(accountId, index)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the asset ID at specified <code>index</code> for desired <code>accountId</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The function might fail in some third-party ERC-721 contracts. If the token contract is not enumerable, this function will always return <code>null</code>.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address.</td></tr> <tr><td>index</td> <td>[required] A <code>number</code> representing the asset index.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>number</code> representing the asset ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// the account has 3 tokens on indexes 0, 1 and 2</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getAccountAssetIdAt</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getapprovedaccount-assetid"><a href="#getapprovedaccount-assetid" class="header-anchor">#</a> getApprovedAccount(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns an account ID of a third party which is able to take over a specific <code>assetId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>string</code> representing account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getApprovedAccount</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#approve-account">approveAccount</a></p> <h3 id="getasset-assetid"><a href="#getasset-assetid" class="header-anchor">#</a> getAsset(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>assetId</code> data.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing the asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <table><thead><tr><th>Key</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td>A <code>string</code> representing asset ID.</td></tr> <tr><td>uri</td> <td>A <code>string</code> representing asset URI which points to asset public metadata.</td></tr> <tr><td>imprint</td> <td>A <code>string</code> representing asset imprint.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getAsset</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getassetaccount-assetid"><a href="#getassetaccount-assetid" class="header-anchor">#</a> getAssetAccount(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns an account ID that owns the <code>assetId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>string</code> which represents an account ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getAssetAccount</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getassetidat-index"><a href="#getassetidat-index" class="header-anchor">#</a> getAssetIdAt(index)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the asset ID at specified <code>index</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The function might fail in some third-party ERC-721 contracts. If the token contract is not enumerable, this function will always return <code>null</code>.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>index</td> <td>[required] A <code>number</code> representing the asset index.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>number</code> representing the asset ID.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// the contract holds 100 tokens on indexes 0 to 99</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getAssetIdAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getbalance-accountid"><a href="#getbalance-accountid" class="header-anchor">#</a> getBalance(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the number of assets owned by <code>accountId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An <code>integer</code> number representing the number of assets in the <code>accountId</code>.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> balance <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getcapabilities"><a href="#getcapabilities" class="header-anchor">#</a> getCapabilities()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns ledger's capabilities.</p> <p><strong>Result:</strong></p> <p>An <code>array</code> of <code>integer</code> numbers representing ledger capabilities.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> capabilities <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getCapabilities</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinfo"><a href="#getinfo" class="header-anchor">#</a> getInfo()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns an object with general information about the ledger.</p> <p><strong>Result:</strong></p> <table><thead><tr><th>Key</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>A <code>string</code> representing asset ledger name.</td></tr> <tr><td>symbol</td> <td>A <code>string</code> representing asset ledger symbol.</td></tr> <tr><td>uriPrefix</td> <td>A <code>string</code> representing prefix of asset URI.</td></tr> <tr><td>uriPostfix</td> <td>A <code>string</code> representing postfix of asset URI.</td></tr> <tr><td>schemaId</td> <td>A <code>string</code> representing data schema ID.</td></tr> <tr><td>supply</td> <td>A big number <code>string</code> representing the total number of issued assets.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-provider-ledgerid"><a href="#getinstance-provider-ledgerid" class="header-anchor">#</a> getInstance(provider, ledgerId)</h3> <p>A static class <code>function</code> that returns a new instance of the AssetLedger class (alias for <code>new AssetLedger</code>).</p> <p><strong>Arguments:</strong></p> <p>See the class <a href="#asset-ledger">constructor</a> for details.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AssetLedger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ledgerId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// create ledger instance</span>
<span class="token keyword">const</span> ledger <span class="token operator">=</span> AssetLedger<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> ledgerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="id-2"><a href="#id-2" class="header-anchor">#</a> id</h3> <p>A class instance <code>variable</code> holding the address of ledger's smart contract on the Ethereum blockchain.</p> <h3 id="grantabilities-accountid-abilities"><a href="#grantabilities-accountid-abilities" class="header-anchor">#</a> grantAbilities(accountId, abilities)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which grants management permissions for this ledger to a third party <code>accountId</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>MANAGE_ABILITIES</code> super ability of the ledger is required to perform this function.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing an Ethereum account address that will receive new management permissions on this ledger.</td></tr> <tr><td>abilities</td> <td>[required] An array of <code>integers</code> representing this ledger's smart contract abilities.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GeneralAssetLedgerAbility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> abilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">,</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">grantAbilities</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> abilities<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#ledger-abilities">Ledger abilities</a> <a href="#revokeabilities-accountid-abilities">revokeAbilities</a></p> <h3 id="isapprovedaccount-assetid-accountid"><a href="#isapprovedaccount-assetid-accountid" class="header-anchor">#</a> isApprovedAccount(assetId, accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>true</code> when the <code>accountId</code> has the ability to take over the <code>assetId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address.</td></tr> <tr><td>assetId</td> <td>[required] A <code>string</code> representing an asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>accountId</code> is approved for <code>assetId</code>.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isApproved <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">isApprovedAccount</span><span class="token punctuation">(</span>assetId<span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#is-approved-operator">isApprovedOperator</a>, <a href="#approve-account">approveAccount</a></p> <h3 id="isapprovedoperator-accountid-operatorid"><a href="#isapprovedoperator-accountid-operatorid" class="header-anchor">#</a> isApprovedOperator(accountId, operatorId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>true</code> when the <code>accountId</code> has the ability to manage any asset of the <code>accountId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address that owns assets.</td></tr> <tr><td>operatorId</td> <td>[required] A <code>string</code> representing a third-party Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>operatorId</code> can manage assets of <code>accountId</code>.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> operatorId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isOperator <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">isApprovedOperator</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> operatorId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#is-approved-account">isApprovedAccount</a>, <a href="#approve-account">approveAccount</a></p> <h3 id="istransferable"><a href="#istransferable" class="header-anchor">#</a> isTransferable()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>true</code> if the asset transfer feature on this ledger is enabled.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>TOGGLE_TRANSFERS</code> ledger capability is required to perform this function.</p></div> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether ledger asset transfers are enabled.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> isTransferable <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">isTransferable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#enable-transfers">enableTransfers</a></p> <h3 id="revokeabilities-accountid-abilities"><a href="#revokeabilities-accountid-abilities" class="header-anchor">#</a> revokeAbilities(accountId, abilities)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which removes <code>abilities</code> of an <code>accountId</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>MANAGE_ABILITIES</code> super ability of the ledger is required to perform this function.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You can revoke your own <code>MANAGE_ABILITIES</code> super ability.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the new Ethereum account address.</td></tr> <tr><td>abilities</td> <td>[required] An <code>array</code> of <code>integer</code> numbers representing ledger abilities.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GeneralAssetLedgerAbility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> abilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">,</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">revokeAbilities</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> abilities<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#ledger-abilities">Ledger abilities</a> <a href="#grantabilities-accountid-abilities">grantAbilities</a></p> <h3 id="revokeasset-assetid"><a href="#revokeasset-assetid" class="header-anchor">#</a> revokeAsset(assetId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which destroys a specific <code>assetId</code> of an account. The asset is removed from the account and all queries about it will be invalid. The function is meant to be used by ledger owners to destroy assets of other accounts. This function is similar to <code>destroyAsset</code>, but it differs in who can trigger it.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>REVOKE_ASSET</code> ledger capability is needed to perform this function.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing the asset ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">revokeAsset</span><span class="token punctuation">(</span>assetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#destroyasset-assetid">destroyAsset</a></p> <h3 id="setabilities-accountid-abilities"><a href="#setabilities-accountid-abilities" class="header-anchor">#</a> setAbilities(accountId, abilities)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which sets <code>abilities</code> of an <code>accountId</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The <code>MANAGE_ABILITIES</code> super ability of the ledger is required to perform this function.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You can override your own <code>MANAGE_ABILITIES</code> super ability.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the new Ethereum account address.</td></tr> <tr><td>abilities</td> <td>[required] An <code>array</code> of <code>integer</code> numbers representing ledger abilities.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GeneralAssetLedgerAbility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> abilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">,</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">setAbilities</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> abilities<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#ledger-abilities">Ledger abilities</a> <a href="#grantabilities-accountid-abilities">grantAbilities</a> <a href="#revokeabilities-accountid-abilities">revokeAbilities</a></p> <h3 id="update-recipe"><a href="#update-recipe" class="header-anchor">#</a> update(recipe)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which updates ledger data.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You need <code>UPDATE_URI</code> ledger ability to update ledger's <code>uriPrefix</code> and <code>uriPostfix</code> properties.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>recipe.uriPrefix</td> <td>[required] A <code>string</code> representing ledger URI uriPrefix property.</td></tr> <tr><td>recipe.uriPostfix</td> <td>[required] A <code>string</code> representing ledger URI uriPostfix property.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    uriPrefix<span class="token operator">:</span> <span class="token string">'https://example.com/'</span><span class="token punctuation">,</span>
    uriPostfix<span class="token operator">:</span> <span class="token string">'.json'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>recipe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#update-asset-assetid-recipe">updateAsset</a></p> <h3 id="updateasset-assetid-recipe"><a href="#updateasset-assetid-recipe" class="header-anchor">#</a> updateAsset(assetId, recipe)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which updates <code>assetId</code> data.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>You need the <code>UPDATE_ASSET_IMPRINT</code> ledger capability and the <code>UPDATE_ASSET</code> ledger ability to update the asset <code>imprint</code> property.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>recipe.imprint</td> <td>[required] A <code>string</code> representing asset imprint property.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> assetId <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    imprint<span class="token operator">:</span> <span class="token string">'d747e6ffd1aa3f83efef2931e3cc22c653ea97a32c1ee7289e4966b6964ecdfb'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">updateAsset</span><span class="token punctuation">(</span>assetId<span class="token punctuation">,</span> recipe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#update">update</a></p> <h3 id="transferasset-recipe"><a href="#transferasset-recipe" class="header-anchor">#</a> transferAsset(recipe)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which transfers an asset to another account.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>recipe.senderId</td> <td>A <code>string</code> representing the account ID that will send the asset. Defaults to account that is making the mutation.</td></tr> <tr><td>recipe.receiverId</td> <td>[required] A <code>string</code> representing the account ID that will receive the asset.</td></tr> <tr><td>recipe.id</td> <td>[required] A <code>string</code> representing asset ID.</td></tr> <tr><td>recipe.data</td> <td>A <code>string</code> representing some arbitrary mutation note.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
    id<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">transferAsset</span><span class="token punctuation">(</span>recipe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ledger-abilities"><a href="#ledger-abilities" class="header-anchor">#</a> Ledger abilities</h2> <p>Ledger abilities represent account-level permissions. For optimization reasons, the abilities are managed as bitfields, and for that reason, enums are values of 2^n.
There are two categories of abilities, general and super. General abilities are abilities that can not change other account's abilities, whereas super abilities can.
This categorization is for safety purposes since revoking your own super ability can lead to unintentional loss of control.</p> <p><strong>Super abilities options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>MANAGE_ABILITIES</td> <td>1</td> <td>Allows an account to further grant abilities.</td></tr> <tr><td>ALLOW_MANAGE_ABILITIES</td> <td>2</td> <td>A specific ability that is bound to atomic orders. When granting or revoking abilities through <code>Gateway</code>, the order maker has to have this ability.</td></tr></tbody></table> <p><strong>General abilities options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>ALLOW_CREATE_ASSET</td> <td>512</td> <td>A specific ability that is bound to atomic orders. When creating a new asset through <code>Gateway</code>, the order maker has to have this ability.</td></tr> <tr><td>ALLOW_UPDATE_ASSET_IMPRINT</td> <td>1024</td> <td>A specific ability that is bound to atomic orders. When updating asset imprint through <code>Gateway</code>, the order maker has to have this ability.</td></tr> <tr><td>CREATE_ASSET</td> <td>16</td> <td>Allows an account to create a new asset.</td></tr> <tr><td>REVOKE_ASSET</td> <td>32</td> <td>Allows management accounts to revoke assets.</td></tr> <tr><td>TOGGLE_TRANSFERS</td> <td>64</td> <td>Allows an account to stop and start asset transfers.</td></tr> <tr><td>UPDATE_ASSET</td> <td>128</td> <td>Allows an account to update asset data.</td></tr> <tr><td>UPDATE_URI</td> <td>256</td> <td>Allows an account to update asset ledger's URI prefix and postfix.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> GeneralAssetLedgerAbility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SuperAssetLedgerAbility <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> abilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    SuperAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">MANAGE_ABILITIES</span><span class="token punctuation">,</span>
    GeneralAssetLedgerAbility<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#grantabilities-accountid-abilities">grantAbilities</a> <a href="#revokeabilities-accountid-abilities">revokeAbilities</a></p> <h2 id="ledger-capabilities"><a href="#ledger-capabilities" class="header-anchor">#</a> Ledger capabilities</h2> <p>Ledger capabilities represent the features of a smart contract.</p> <p><strong>Options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>DESTROY_ASSET</td> <td>1</td> <td>Enables asset owners to destroy their assets.</td></tr> <tr><td>UPDATE_ASSET</td> <td>2</td> <td>Enables ledger managers to update asset data.</td></tr> <tr><td>REVOKE_ASSET</td> <td>4</td> <td>Enables ledger managers to revoke assets.</td></tr> <tr><td>TOGGLE_TRANSFERS</td> <td>3</td> <td>Enables ledger managers to start and stop asset transfers.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> AssetLedgerCapability <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-asset-ledger'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> capabilities <span class="token operator">=</span> <span class="token punctuation">[</span>
    AssetLedgerCapability<span class="token punctuation">.</span><span class="token constant">TOGGLE_TRANSFERS</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="value-ledger"><a href="#value-ledger" class="header-anchor">#</a> Value ledger</h2> <p>Value ledger represents an ERC-20-related smart contract on the Ethereum blockchain.</p> <h3 id="installation-6"><a href="#installation-6" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the asset ledger module as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-value-ledger
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that you can directly include in your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about asset ledger.</p> <h3 id="valueledger-provider-ledgerid"><a href="#valueledger-provider-ledgerid" class="header-anchor">#</a> ValueLedger(provider, ledgerId)</h3> <p>A <code>class</code> which represents a smart contract on the Ethereum blockchain.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>ledgerId</td> <td>[required] A string representing an address of the ERC-20-related smart contract on the Ethereum blockchain.</td></tr> <tr><td>provider</td> <td>[required] An instance of provider.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ValueLedger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-value-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ledgerId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// create ledger instance</span>
<span class="token keyword">const</span> ledger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ValueLedger</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> ledgerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="approvevalue-value-accountid"><a href="#approvevalue-value-accountid" class="header-anchor">#</a> approveValue(value, accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which approves a third-party <code>accountId</code> to transfer a specific <code>value</code>. This function succeeds only when performed by the asset's owner. Multiple accounts can be approved for different values at the same time.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing an account address.</td></tr> <tr><td>value</td> <td>[required] An <code>integer</code> number representing the approved amount.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token string">'1000000000000000000'</span><span class="token punctuation">;</span> <span class="token comment">// 1 unit (18 decimals)</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">approveValue</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#disapprove-value">disapproveValue</a></p> <h3 id="deploy-provider-recipe-2"><a href="#deploy-provider-recipe-2" class="header-anchor">#</a> deploy(provider, recipe)</h3> <p>An <code>asynchronous</code> static class <code>function</code> which deploys a new value ledger to the Ethereum blockchain.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>provider</td> <td>[required] An instance of provider.</td></tr> <tr><td>recipe.name</td> <td>[required] A <code>string</code> representing value ledger name.</td></tr> <tr><td>recipe.symbol</td> <td>[required] A <code>string</code> representing value ledger symbol.</td></tr> <tr><td>recipe.decimals</td> <td>[required] A big number <code>string</code> representing the number of decimals.</td></tr> <tr><td>recipe.supply</td> <td>[required] A big number <code>string</code> representing the total supply of a ledger.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ValueLedger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-value-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'Utility token'</span><span class="token punctuation">,</span>
    <span class="token builtin">symbol</span><span class="token operator">:</span> <span class="token string">'UCC'</span><span class="token punctuation">,</span>
    decimal<span class="token operator">:</span> <span class="token string">'18'</span><span class="token punctuation">,</span>
    supply<span class="token operator">:</span> <span class="token string">'500000000000000000000'</span><span class="token punctuation">,</span> <span class="token comment">// 500 mio</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ValueLedger<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> recipe<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> mutation<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait until first confirmation</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="disapprovevalue-accountid"><a href="#disapprovevalue-accountid" class="header-anchor">#</a> disapproveValue(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which removes the ability of a third-party account to transfer value. Note that this function succeeds only when performed by the value owner.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing an account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">disapproveValue</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#approve-value">approveValue</a></p> <h3 id="getapprovedvalue-accountid-spenderid"><a href="#getapprovedvalue-accountid-spenderid" class="header-anchor">#</a> getApprovedValue(accountId, spenderId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the approved value that the <code>spenderId</code> is able to transfer for <code>accountId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the holder's account ID.</td></tr> <tr><td>spenderId</td> <td>[required] A <code>string</code> representing the spender's account ID.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A big number <code>string</code> representing the approved value.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> spenderId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getApprovedValue</span><span class="token punctuation">(</span>accountId<span class="token punctuation">,</span> spenderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#approve-value">approveValue</a></p> <h3 id="getbalance-accountid-2"><a href="#getbalance-accountid-2" class="header-anchor">#</a> getBalance(accountId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns the total possessed amount of the <code>accountId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A big number <code>string</code> representing the total value of the <code>accountId</code>.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> balance <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span>accountId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinfo-2"><a href="#getinfo-2" class="header-anchor">#</a> getInfo()</h3> <p>An <code>asynchronous</code> class instance <code>function</code> that returns an object with general information about the ledger.</p> <p><strong>Result:</strong></p> <table><thead><tr><th>Key</th> <th>Description</th></tr></thead> <tbody><tr><td>name</td> <td>A <code>string</code> representing value ledger name.</td></tr> <tr><td>symbol</td> <td>A <code>string</code> representing value ledger symbol.</td></tr> <tr><td>decimals</td> <td>[required] A big number of <code>strings</code> representing the number of decimals.</td></tr> <tr><td>supply</td> <td>[required] A big number <code>string</code> representing the ledger total supply.</td></tr></tbody></table> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getinstance-provider-id"><a href="#getinstance-provider-id" class="header-anchor">#</a> getInstance(provider, id)</h3> <p>A static class <code>function</code> that returns a new instance of the ValueLedger class (alias for <code>new ValueLedger</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#value-ledger">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ValueLedger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-value-ledger'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ledgerId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>

<span class="token comment">// create ledger instance</span>
<span class="token keyword">const</span> ledger <span class="token operator">=</span> ValueLedger<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> ledgerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="id-3"><a href="#id-3" class="header-anchor">#</a> id</h3> <p>A class instance <code>variable</code> holding the address of ledger's smart contract on the Ethereum blockchain.</p> <h3 id="isapprovedvalue-value-accountid-spenderid"><a href="#isapprovedvalue-value-accountid-spenderid" class="header-anchor">#</a> isApprovedValue(value, accountId, spenderId)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns <code>true</code> when the <code>spenderId</code> has the ability to transfer the <code>value</code> from an <code>accountId</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>accountId</td> <td>[required] A <code>string</code> representing the Ethereum account address that owns the funds.</td></tr> <tr><td>spenderId</td> <td>[required] A <code>string</code> representing the approved Ethereum account address.</td></tr> <tr><td>value</td> <td>[required] A big number <code>string</code> representing the amount allowed to transfer.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>boolean</code> which tells whether the <code>spenderId</code> is approved to move <code>value</code> from <code>accountId</code>.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> accountId <span class="token operator">=</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> spenderId <span class="token operator">=</span> <span class="token string">'0xcc667f88e8821fb8d19f7e6240f44553ce3dbfdd'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token string">'1000000000000000000'</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> isApproved <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">isApprovedAccount</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> accountId<span class="token punctuation">,</span> spenderId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#approve-value">approveValue</a></p> <h3 id="transfervalue-recipe"><a href="#transfervalue-recipe" class="header-anchor">#</a> transferValue(recipe)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which transfers an asset to another account.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>recipe.receiverId</td> <td>[required] A <code>string</code> representing account ID that will receive the value.</td></tr> <tr><td>recipe.senderId</td> <td>A <code>string</code> representing account ID that will send the value. It defaults to the provider's accountId.</td></tr> <tr><td>recipe.value</td> <td>[required] A big number <code>string</code> representing the transferred amount.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> recipe <span class="token operator">=</span> <span class="token punctuation">{</span>
    receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">'1000000000000000000'</span><span class="token punctuation">,</span> <span class="token comment">// 1 unit (18 decimals)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> ledger<span class="token punctuation">.</span><span class="token function">transferValue</span><span class="token punctuation">(</span>recipe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="gateway"><a href="#gateway" class="header-anchor">#</a> Gateway</h2> <p>The Gateway allows for performing multiple actions in a single atomic swap. The gateway always operates with an order.
There are different kinds of order, depending on the type of action you want to perform. We can separate orders into two groups
based on their functionality and their flow. First, there are orders for deploying a new <code>ValueLedger</code> and <code>AssetLedger</code>.
These two orders only perform the deployment of a new smart contract to the blockchain plus a transfer of ERC-20 tokens (value).
They are primarily targeted to delegating a deployment to a third party. For example, if you want to deploy a new <code>AssetLedger</code>
but you do not want to do that yourself, you can pay someone some ERC-20 tokens to perform that for you. These two orders have the following flow:</p> <ol><li>Maker (address creating an order) defines the order (defines who will be the owner of the newly deployed ledger, who will receive tokens, etc.).</li> <li>Maker generates the order claim and signs it (<code>sign</code> function).</li> <li>Maker approves value transfer if necessary.</li> <li>Maker sends the order and signature to the taker (through arbitrary ways).</li> <li>Taker performs the order.</li></ol> <p>In this case, the taker can also be defined as &quot;anyone&quot;, meaning you can define an order saying basically, &quot;I am willing to pay X tokens to anyone willing to create this ledger for me&quot;.</p> <p>Order kinds that fit into this group are:</p> <ul><li><code>DeployAssetLedgerOrder</code></li> <li><code>DeployValueLedgerOrder</code></li></ul> <p>Then, there are orders for performing actions on existing ledgers. These orders are really powerful, but this makes them more complicated, too.
Unlike deploy orders that have a specific maker and taker, the actions order are more dynamic, allowing an X number of participants to join but who need to sign an order for it to be valid.
That also means that we can have multiple participants performing actions in a single atomic order. Actions that can be performed are the following:</p> <ul><li>Transfer asset</li> <li>Transfer value</li> <li>Create new asset</li> <li>Update existing asset imprint</li> <li>Destroy an asset</li> <li>Update account abilities</li></ul> <p>Since we have multiple participants in an order, there are four different ways to interact with it, resulting in four <code>ActionsOrder</code>s differentiating only in the way participants interact with it, namely:</p> <ul><li><code>FixedActionsOrder</code> - All participants are known and set in the order. Only the last defined participant can perform the order, other participants have to provide signatures.</li> <li><code>SignedFixedActionsOrder</code> - All participants are known and set in the order. All participants have to provide signatures. Any participant can perform the order.</li> <li><code>DynamicActionsOrder</code> - The last participant can be unknown or &quot;any&quot;. All defined participants have to provide signatures. Any participant can peform the order and automatically becomes the last participant.</li> <li><code>SignedDynamicActionsOrder</code> - The last participant can be unknown or &quot;any&quot;. All defined participants have to provide signatures, the last or &quot;any&quot; participant, as well. Any participant can perform the order.</li></ul> <p>Let's illustrate the above concepts through an example. Let's say we want to sell two CryptoKitties for 5.000 ZXC. To allow anyone to buy it, we would use a <code>DynamicActionsOrder</code>, since we do not need to set the <code>receiverId</code> of the CryptoKitties and neither the <code>senderId</code> of ZXC. This means that anyone that wants to perform the order will automatically become the empty recipient/sender with whom we will exchange the assets. If we use the same case, but this time, we want to sell our CryptoKitties to Bob for 5.000 ZXC, we will use <code>FixedActionsOrder</code>, so that we can specify the exact receiver. Now, let's say that Bob does not have any ETH and is unable to perform the order, but he has tons of ZXC tokens, and his friend Sara is willing to help him out. In this case, we can use a <code>SignedFixedActionsOrder</code>, so that Bob only needs to sign the order, and Sara can perform it. If he wanted to pay Sara some ZXC for doing this, he could specify this in the order.</p> <p>Therefore, <code>signed</code> orders are perfect for third-party services providing order execution for someone else. This can come handy in a variety of dApps.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>When using dynamic order, you cannot send any of the assets to the zero address (0x000...0), since the zero address is reserved for replacing the order taker in the smart contract.</p></div> <h3 id="installation-7"><a href="#installation-7" class="header-anchor">#</a> Installation</h3> <p>We recommend you employ the package as an NPM package in your application.</p> <div class="language-ell extra-class"><pre class="language-text"><code>$ npm i --save @0xcert/ethereum-http-provider
</code></pre></div><p>On our official <a href="https://github.com/0xcert/framework" target="_self" rel="noopener noreferrer alternate">GitHub repository</a>, we also host a compiled and minimized JavaScript file that can be directly implemented into your website. Please refer to the <a href="/api/core.html">API</a> section to learn more about the value ledger.</p> <h3 id="gateway-provider-gatewayconfig"><a href="#gateway-provider-gatewayconfig" class="header-anchor">#</a> Gateway(provider, gatewayConfig?)</h3> <p>A <code>class</code> representing a smart contract on the Ethereum blockchain.</p> <p><strong>Arguments</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>gatewayConfig.assetLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">asset ledger deploy gateway</a>.</td></tr> <tr><td>gatewayConfig.actionsOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">actions gateway</a>.</td></tr> <tr><td>gatewayConfig.valueLedgerDeployOrderId</td> <td>A <code>string</code> representing an Ethereum address of the <a href="/#public-addresses">value ledger deploy gateway</a>.</td></tr> <tr><td>provider</td> <td>[required] An instance of provider.</td></tr></tbody></table> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider<span class="token punctuation">,</span> buildGatewayConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Gateway <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-gateway'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create ledger instance</span>
<span class="token keyword">const</span> gateway <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gateway</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> <span class="token function">buildGatewayConfig</span><span class="token punctuation">(</span>NetworkType<span class="token punctuation">.</span><span class="token constant">ROPSTEN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cancel-order"><a href="#cancel-order" class="header-anchor">#</a> cancel(order)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which marks the provided <code>order</code> as canceled. It prevents the <code>order</code> from being performed.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>order</td> <td>[required] An <a href="#order-kinds"><code>Order</code> object</a>.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ActionsOrderActionKind <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-gateway'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> OrderKind<span class="token punctuation">.</span>FixedActionsOrder<span class="token punctuation">,</span>
    signers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> ActionsOrderActionKind<span class="token punctuation">.</span><span class="token constant">TRANSFER_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> <span class="token string">'0xcc377f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    expiration<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 1 day</span>
    seed<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#sign">claim</a>, <a href="#perform">perform</a></p> <h3 id="config"><a href="#config" class="header-anchor">#</a> config</h3> <p>A class instance <code>variable</code> holding the configuration of gateway smart contracts.</p> <h3 id="getinstance-provider-gatewayconfig"><a href="#getinstance-provider-gatewayconfig" class="header-anchor">#</a> getInstance(provider, gatewayConfig?)</h3> <p>A static class <code>function</code> that returns a new instance of the <code>Gateway</code> class (alias for <code>new Gateway</code>).</p> <p><strong>Arguments</strong></p> <p>See the class <a href="#gateway">constructor</a> for details.</p> <p><strong>Usage</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MetamaskProvider<span class="token punctuation">,</span> buildGatewayConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-metamask-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Gateway <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@0xcert/ethereum-gateway'</span><span class="token punctuation">;</span>

<span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MetamaskProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create gateway instance</span>
<span class="token keyword">const</span> gateway <span class="token operator">=</span> Gateway<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span>provider<span class="token punctuation">,</span> <span class="token function">buildGatewayConfig</span><span class="token punctuation">(</span>NetworkType<span class="token punctuation">.</span><span class="token constant">ROPSTEN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="getproxyaccountid-proxykind-ledgerid"><a href="#getproxyaccountid-proxykind-ledgerid" class="header-anchor">#</a> getProxyAccountId(proxyKind, ledgerId?)</h2> <p>An <code>asynchronous</code> class instance <code>function</code> which gets the accountId of the desired proxy from the gateway smart contract infrastructure.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>proxyKind</td> <td>[required] A <code>ProxyKind</code> option.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>string</code> representing proxy accountId.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// perform query</span>
<span class="token keyword">const</span> proxyAccountId <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">getProxyAccountId</span><span class="token punctuation">(</span>ProxyKind<span class="token punctuation">.</span><span class="token constant">CREATE_ASSET</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="hash-order"><a href="#hash-order" class="header-anchor">#</a> hash(order)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which returns a hash of the provided <code>order</code>.</p> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>order</td> <td>[required] An <a href="#order-kinds"><code>Order</code> object</a>.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>string</code> representing order hash.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> OrderKind<span class="token punctuation">.</span>FixedActionsOrder<span class="token punctuation">,</span>
    signers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> ActionsOrderActionKind<span class="token punctuation">.</span><span class="token constant">TRANSFER_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> <span class="token string">'0xcc377f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    expiration<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 1 day</span>
    seed<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> hash <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="perform-order-signature"><a href="#perform-order-signature" class="header-anchor">#</a> perform(order, signature)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which submits the <code>order</code> with a <code>signature</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The executor of this operation varies depending on the <code>OrderKind</code>.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>signature</td> <td>[required] A <code>string</code> or <code>string[]</code> representing order signatures.</td></tr> <tr><td>order</td> <td>[required] An <a href="#order-kinds"><code>Order</code> object</a>.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>An instance of the same mutation class.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> OrderKind<span class="token punctuation">.</span>FixedActionsOrder<span class="token punctuation">,</span>
    signers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> ActionsOrderActionKind<span class="token punctuation">.</span><span class="token constant">TRANSFER_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> <span class="token string">'0xcc377f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    expiration<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 1 day</span>
    seed<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform mutation</span>
<span class="token keyword">const</span> mutation <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> signature<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>See also:</strong></p> <p><a href="#cancel">cancel</a></p> <h3 id="sign-order"><a href="#sign-order" class="header-anchor">#</a> sign(order)</h3> <p>An <code>asynchronous</code> class instance <code>function</code> which cryptographically signs the provided <code>order</code> and returns a signature.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>This operation must be executed by the maker or one of the signers of the order.</p></div> <p><strong>Arguments:</strong></p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>order</td> <td>[required] An <a href="#order-kinds"><code>Order</code> object</a>.</td></tr></tbody></table> <p><strong>Result:</strong></p> <p>A <code>string</code> representing order signature.</p> <p><strong>Example:</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// arbitrary data</span>
<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>
    kind<span class="token operator">:</span> OrderKind<span class="token punctuation">.</span>FixedActionsOrder<span class="token punctuation">,</span>
    signers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            kind<span class="token operator">:</span> ActionsOrderActionKind<span class="token punctuation">.</span><span class="token constant">TRANSFER_ASSET</span><span class="token punctuation">,</span>
            ledgerId<span class="token operator">:</span> <span class="token string">'0xcc377f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            senderId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            receiverId<span class="token operator">:</span> <span class="token string">'0xcc567f78e8821fb8d19f7e6240f44553ce3dbfce'</span><span class="token punctuation">,</span>
            assetId<span class="token operator">:</span> <span class="token string">'100'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    expiration<span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// 1 day</span>
    seed<span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// perform query</span>
<span class="token keyword">const</span> signature <span class="token operator">=</span> <span class="token keyword">await</span> gateway<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="order-kinds"><a href="#order-kinds" class="header-anchor">#</a> Order kinds</h2> <p>The order defines what an atomic swap will do. There are three different order kinds with different use cases and definitions.</p> <h3 id="asset-ledger-deploy-order"><a href="#asset-ledger-deploy-order" class="header-anchor">#</a> Asset ledger deploy order</h3> <p>This order kind is used for delegating <code>AssetLedger</code> deploy.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>assetLedgerData.capabilities</td> <td>[required] A list of <code>integers</code> representing ledger capabilities.</td></tr> <tr><td>assetLedgerData.name</td> <td>[required] A <code>string</code> representing asset ledger name.</td></tr> <tr><td>assetLedgerData.owner</td> <td>[required] A <code>string</code> representing  the Ethereum wallet, which will be the owner of the asset ledger.</td></tr> <tr><td>assetLedgerData.schemaId</td> <td>[required] A <code>string</code> representing data schema ID.</td></tr> <tr><td>assetLedgerData.symbol</td> <td>[required] A <code>string</code> representing asset ledger symbol.</td></tr> <tr><td>assetLedgerData.uriPrefix</td> <td>[required] A <code>string</code> representing prefix of asset URI.</td></tr> <tr><td>assetLedgerData.uriPostfix</td> <td>[required] A <code>string</code> representing postfix of asset URI.</td></tr> <tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.ASSET_LEDGER_DEPLOY_ORDER</code>.</td></tr> <tr><td>makerId</td> <td>[required] A <code>string</code> representing an Ethereum account address which makes the order. It defaults to the <code>accountId</code> of a provider.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>takerId</td> <td>A <code>string</code> representing the Ethereum account address which will be able to perform the order on the blockchain. This account also pays the gas cost.</td></tr> <tr><td>tokenTransferData.ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>tokenTransferData.receiverId</td> <td>A <code>string</code> representing the receiver's address.</td></tr> <tr><td>tokenTransferData.value</td> <td>[required] A big number <code>string</code> representing the transferred amount.</td></tr></tbody></table> <h3 id="dynamicactionsorder"><a href="#dynamicactionsorder" class="header-anchor">#</a> DynamicActionsOrder</h3> <p>This order kind can perform multiple operations such as value transfer, asset transfer, asset creation, asset update, setting user abilities, and destroying assets.
All participants (signers) except for the last one are defined. This means that any participant with the order and signatures from other participants can perform the order and, by doing so, becomes the last &quot;unknown&quot; participant.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>actions</td> <td>[required] An <code>array</code> of [dynamic actions order action objects](#actions order-actions).</td></tr> <tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.DYNAMIC_ACTIONS_ORDER</code>.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>signers</td> <td>[required] A <code>string[]</code> representing order signers.</td></tr></tbody></table> <h3 id="fixedactionsorder"><a href="#fixedactionsorder" class="header-anchor">#</a> FixedActionsOrder</h3> <p>This order kind can perform multiple operations such as value transfer, asset transfer, asset creation, asset update, setting user abilities, and destroying assets.
All participants (signers) have to be known beforehand, and the last defined signer can peform the order (the last signer's signature is not needed since he is the one performing the order).</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>actions</td> <td>[required] An <code>array</code> of [fixed actions order action objects](#actions order-actions).</td></tr> <tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.FIXED_ACTIONS_ORDER</code>.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>signers</td> <td>[required] A <code>string[]</code> representing order signers.</td></tr></tbody></table> <h3 id="signeddynamicactionsorder"><a href="#signeddynamicactionsorder" class="header-anchor">#</a> SignedDynamicActionsOrder</h3> <p>This order kind can perform multiple operations such as value transfer, asset transfer, asset creation, asset update, setting user abilities, and destroying assets.
All participants (signers) except for the last one are defined. This means that any participant can provide the last signature and, by doing so, becomes the last participant. Any participant with all the signatures is able to perform the order.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>actions</td> <td>[required] An <code>array</code> of [dynamic actions order action objects](#actions order-actions).</td></tr> <tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.SIGNED_DYNAMIC_ACTIONS_ORDER</code>.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>signers</td> <td>[required] A <code>string[]</code> representing order signers.</td></tr></tbody></table> <h3 id="signedfixedactionsorder"><a href="#signedfixedactionsorder" class="header-anchor">#</a> SignedFixedActionsOrder</h3> <p>This order kind can perform multiple operations such as value transfer, asset transfer, asset creation, asset update, setting user abilities, and destroying assets.
All participants (signers) have to be known beforehand, and any participant with all signatures provided can perform the order.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>actions</td> <td>[required] An <code>array</code> of [fixed actions order action objects](#actions order-actions).</td></tr> <tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.SIGNED_FIXED_ACTIONS_ORDER</code>.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>signers</td> <td>[required] A <code>string[]</code> representing order signers.</td></tr></tbody></table> <h3 id="value-ledger-deploy-order"><a href="#value-ledger-deploy-order" class="header-anchor">#</a> Value ledger deploy order</h3> <p>This order kind is used for delegating <code>ValueLedger</code> deploy.</p> <table><thead><tr><th>Argument</th> <th>Description</th></tr></thead> <tbody><tr><td>expiration</td> <td>[required] An <code>integer</code> number representing the timestamp in milliseconds after which the order expires and can not be performed anymore.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>OrderKind.ASSET_LEDGER_DEPLOY_ORDER</code>.</td></tr> <tr><td>makerId</td> <td>[required] A <code>string</code> representing an Ethereum account address which makes the order. It defaults to the <code>accountId</code> of a provider.</td></tr> <tr><td>seed</td> <td>[required] An <code>integer</code> number representing a unique order number.</td></tr> <tr><td>takerId</td> <td>A <code>string</code> representing the Ethereum account address which will be able to perform the order on the blockchain. This account also pays the gas cost.</td></tr> <tr><td>tokenTransferData.ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>tokenTransferData.receiverId</td> <td>A <code>string</code> representing the receiver's address.</td></tr> <tr><td>tokenTransferData.value</td> <td>[required] A big number <code>string</code> representing the transferred amount.</td></tr> <tr><td>valueLedgerData.decimals</td> <td>[required] A big number <code>string</code> representing the number of decimals.</td></tr> <tr><td>valueLedgerData.name</td> <td>[required] A <code>string</code> representing value ledger name.</td></tr> <tr><td>valueLedgerData.owner</td> <td>[required] A <code>string</code> representing the Ethereum wallet that will be the owner of the asset ledger.</td></tr> <tr><td>valueLedgerData.supply</td> <td>[required] A big number <code>string</code> representing the total supply of a ledger.</td></tr> <tr><td>valueLedgerData.symbol</td> <td>[required] A <code>string</code> representing value ledger symbol.</td></tr></tbody></table> <h2 id="actionsorder-actions"><a href="#actionsorder-actions" class="header-anchor">#</a> ActionsOrder actions</h2> <p>ActionsOrder actions define the atomic operations of the actions order.</p> <p><strong>Options:</strong></p> <table><thead><tr><th>Name</th> <th>Value</th> <th>Description</th></tr></thead> <tbody><tr><td>CREATE_ASSET</td> <td>1</td> <td>Create a new asset.</td></tr> <tr><td>DESTROY_ASSET</td> <td>6</td> <td>Destroy an asset.</td></tr> <tr><td>UPDATE_ASSET_IMPRINT</td> <td>4</td> <td>Update asset imprint.</td></tr> <tr><td>SET_ABILITIES</td> <td>5</td> <td>Set abilities.</td></tr> <tr><td>TRANSFER_ASSET</td> <td>2</td> <td>Transfer an asset.</td></tr> <tr><td>TRANSFER_VALUE</td> <td>3</td> <td>Transfer a value.</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>There is a possibility of unintentional behavior where asset imprint can be overwritten if more than one <code>UPDATE_ASSET_IMPRINT</code> order per asset is active. Be aware of this when implementing.</p></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>There is a possibility of unintentional behavior where account abilities could be overwritten if more than one <code>SET_ABILITIES</code> action per account is active. Be aware of this when implementing.</p></div> <h3 id="dynamicactionsorderactioncreateasset"><a href="#dynamicactionsorderactioncreateasset" class="header-anchor">#</a> DynamicActionsOrderActionCreateAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>assetImprint</td> <td>[required] A <code>string</code> representing a cryptographic imprint of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.CREATE_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="dynamicactionsorderactiondestroyasset"><a href="#dynamicactionsorderactiondestroyasset" class="header-anchor">#</a> DynamicActionsOrderActionDestroyAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.DESTROY_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="dynamicactionsorderactionsetabilities"><a href="#dynamicactionsorderactionsetabilities" class="header-anchor">#</a> DynamicActionsOrderActionSetAbilities</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>abilities[]</td> <td>[required] An array of <code>AssetLedgerAbility</code> representing abilities of an account.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.SET_ABILITIES</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>A <code>string</code> representing the receiver's (account of which we are setting abilities) address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="dynamicactionsorderactionupdateassetimprint"><a href="#dynamicactionsorderactionupdateassetimprint" class="header-anchor">#</a> DynamicActionsOrderActionUpdateAssetImprint</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>assetImprint</td> <td>[required] A <code>string</code> representing a cryptographic imprint of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.UPDATE_ASSET_IMPRINT</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="dynamicactionsorderactiontransferasset"><a href="#dynamicactionsorderactiontransferasset" class="header-anchor">#</a> DynamicActionsOrderActionTransferAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.TRANSFER_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="dynamicactionsorderactiontransfervalue"><a href="#dynamicactionsorderactiontransfervalue" class="header-anchor">#</a> DynamicActionsOrderActionTransferValue</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.TRANSFER_VALUE</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>A <code>string</code> representing the sender's address.</td></tr> <tr><td>value</td> <td>[required] A big number <code>string</code> representing the transferred amount.</td></tr></tbody></table> <h3 id="fixedactionsorderactioncreateasset"><a href="#fixedactionsorderactioncreateasset" class="header-anchor">#</a> FixedActionsOrderActionCreateAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>assetImprint</td> <td>[required] A <code>string</code> representing a cryptographic imprint of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.CREATE_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>[required] A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="fixedactionsorderactiondestroyasset"><a href="#fixedactionsorderactiondestroyasset" class="header-anchor">#</a> FixedActionsOrderActionDestroyAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.DESTROY_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="fixedactionsorderactionsetabilities"><a href="#fixedactionsorderactionsetabilities" class="header-anchor">#</a> FixedActionsOrderActionSetAbilities</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>abilities[]</td> <td>[required] An array of <code>AssetLedgerAbility</code> representing abilities of an account.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.SET_ABILITIES</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>[required] A <code>string</code> representing the receiver's (account of which we are setting abilities) address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="fixedactionsorderactionupdateassetimprint"><a href="#fixedactionsorderactionupdateassetimprint" class="header-anchor">#</a> FixedActionsOrderActionUpdateAssetImprint</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>assetImprint</td> <td>[required] A <code>string</code> representing a cryptographic imprint of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.UPDATE_ASSET_IMPRINT</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="fixedactionsorderactiontransferasset"><a href="#fixedactionsorderactiontransferasset" class="header-anchor">#</a> FixedActionsOrderActionTransferAsset</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>assetId</td> <td>[required] A <code>string</code> representing an ID of an asset.</td></tr> <tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.TRANSFER_ASSET</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>[required] A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr></tbody></table> <h3 id="fixedactionsorderactiontransfervalue"><a href="#fixedactionsorderactiontransfervalue" class="header-anchor">#</a> FixedActionsOrderActionTransferValue</h3> <table><thead><tr><th>Property</th> <th>Description</th></tr></thead> <tbody><tr><td>kind</td> <td>[required] An <code>integer</code> number that equals to <code>ActionsOrderActionKind.TRANSFER_VALUE</code>.</td></tr> <tr><td>ledgerId</td> <td>[required] A <code>string</code> representing asset ledger address.</td></tr> <tr><td>receiverId</td> <td>[required] A <code>string</code> representing the receiver's address.</td></tr> <tr><td>senderId</td> <td>[required] A <code>string</code> representing the sender's address.</td></tr> <tr><td>value</td> <td>[required] A big number <code>string</code> representing the transferred amount.</td></tr></tbody></table> <h2 id="public-addresses"><a href="#public-addresses" class="header-anchor">#</a> Public addresses</h2> <p>These are the latest addresses that work with the 0xcert Framework version 2.0.0. For older addresses, check <a href="">Documentation v1</a>.</p> <h3 id="mainnet"><a href="#mainnet" class="header-anchor">#</a> Mainnet</h3> <p>Coming soon...</p> <table><thead><tr><th>Contract</th> <th>Address</th></tr></thead> <tbody><tr><td>AbilitableManageProxy</td> <td><a href=""></a></td></tr> <tr><td>ActionsGateway</td> <td><a href=""></a></td></tr> <tr><td>NFTokenTransferProxy</td> <td><a href=""></a></td></tr> <tr><td>NFTokenSafeTransferProxy</td> <td><a href=""></a></td></tr> <tr><td>TokenDeployGateway</td> <td><a href=""></a></td></tr> <tr><td>TokenDeployProxy</td> <td><a href=""></a></td></tr> <tr><td>TokenTransferProxy</td> <td><a href=""></a></td></tr> <tr><td>XcertCreateProxy</td> <td><a href=""></a></td></tr> <tr><td>XcertDeployGateway</td> <td><a href=""></a></td></tr> <tr><td>XcertDeployProxy</td> <td><a href=""></a></td></tr> <tr><td>XcertDestroyProxy</td> <td><a href=""></a></td></tr> <tr><td>XcertUpdateProxy</td> <td><a href=""></a></td></tr></tbody></table> <h3 id="ropsten"><a href="#ropsten" class="header-anchor">#</a> Ropsten</h3> <table><thead><tr><th>Contract</th> <th>Address</th></tr></thead> <tbody><tr><td>AbilitableManageProxy</td> <td><a href="https://ropsten.etherscan.io/address/0xB20C9E6d8FD5030496A3A4B23DBA9B829b9162Cd" target="_self" rel="noopener noreferrer alternate">0xB20C9E6d8FD5030496A3A4B23DBA9B829b9162Cd</a></td></tr> <tr><td>ActionsGateway</td> <td><a href="https://ropsten.etherscan.io/address/0x265A62A3EfB677ca6A0F7C85dC5002EC71F2cde6" target="_self" rel="noopener noreferrer alternate">0x265A62A3EfB677ca6A0F7C85dC5002EC71F2cde6</a></td></tr> <tr><td>NFTokenTransferProxy</td> <td><a href="https://ropsten.etherscan.io/address/0xC99C68dEB93BDcA009F4e8d0Ffe0eB1559CEd394" target="_self" rel="noopener noreferrer alternate">0xC99C68dEB93BDcA009F4e8d0Ffe0eB1559CEd394</a></td></tr> <tr><td>NFTokenSafeTransferProxy</td> <td><a href="https://ropsten.etherscan.io/address/0xddF2A8e23DEC02d56e904610c01eb4ccB617b4fb" target="_self" rel="noopener noreferrer alternate">0xddF2A8e23DEC02d56e904610c01eb4ccB617b4fb</a></td></tr> <tr><td>TokenDeployGateway</td> <td><a href="https://ropsten.etherscan.io/address/0xd3bf7FF070a58A580D7ef82DF130DC0B06b567D8" target="_self" rel="noopener noreferrer alternate">0xd3bf7FF070a58A580D7ef82DF130DC0B06b567D8</a></td></tr> <tr><td>TokenDeployProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x34241B71c6a714730181B07927617692C6d72270" target="_self" rel="noopener noreferrer alternate">0x34241B71c6a714730181B07927617692C6d72270</a></td></tr> <tr><td>TokenTransferProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x7757b6464C3Ed7997Bb90306DeC99c7F6EAb4c80" target="_self" rel="noopener noreferrer alternate">0x7757b6464C3Ed7997Bb90306DeC99c7F6EAb4c80</a></td></tr> <tr><td>XcertCreateProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x65cFd11639B1cDEfcd6472701f6520c048e669A1" target="_self" rel="noopener noreferrer alternate">0x65cFd11639B1cDEfcd6472701f6520c048e669A1</a></td></tr> <tr><td>XcertDeployGateway</td> <td><a href="https://ropsten.etherscan.io/address/0x2ED6fA578A0331Bcd598Ac0c43D26fe896b967c9" target="_self" rel="noopener noreferrer alternate">0x2ED6fA578A0331Bcd598Ac0c43D26fe896b967c9</a></td></tr> <tr><td>XcertDeployProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x776755729E3cab8E0A93F08d3465028154001284" target="_self" rel="noopener noreferrer alternate">0x776755729E3cab8E0A93F08d3465028154001284</a></td></tr> <tr><td>XcertDestroyProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x47cb8D2902F163711DD3d68Da3509996524BE2A1" target="_self" rel="noopener noreferrer alternate">0x47cb8D2902F163711DD3d68Da3509996524BE2A1</a></td></tr> <tr><td>XcertUpdateProxy</td> <td><a href="https://ropsten.etherscan.io/address/0x0226329dF8b9F2F08957152aD0B26E02B1a7b87c" target="_self" rel="noopener noreferrer alternate">0x0226329dF8b9F2F08957152aD0B26E02B1a7b87c</a></td></tr></tbody></table> <h3 id="rinkeby"><a href="#rinkeby" class="header-anchor">#</a> Rinkeby</h3> <table><thead><tr><th>Contract</th> <th>Address</th></tr></thead> <tbody><tr><td>AbilitableManageProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0xf3fbFd8951A27CAA525a41B09A185B60423240Cc" target="_self" rel="noopener noreferrer alternate">0xf3fbFd8951A27CAA525a41B09A185B60423240Cc</a></td></tr> <tr><td>ActionsGateway</td> <td><a href="https://rinkeby.etherscan.io/address/0x2e697eAcdCEc69A9695fb4908a35D04C80aB7E49" target="_self" rel="noopener noreferrer alternate">0x2e697eAcdCEc69A9695fb4908a35D04C80aB7E49</a></td></tr> <tr><td>NFTokenTransferProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x7da2DE6CF92821EDC84078e117c2CCae3927c2E5" target="_self" rel="noopener noreferrer alternate">0x7da2DE6CF92821EDC84078e117c2CCae3927c2E5</a></td></tr> <tr><td>NFTokenSafeTransferProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x7da2DE6CF92821EDC84078e117c2CCae3927c2E5" target="_self" rel="noopener noreferrer alternate">0x7da2DE6CF92821EDC84078e117c2CCae3927c2E5</a></td></tr> <tr><td>TokenDeployGateway</td> <td><a href="https://rinkeby.etherscan.io/address/0xa5ff982d4b054F777DC3eFe77b5D91236A389800" target="_self" rel="noopener noreferrer alternate">0xa5ff982d4b054F777DC3eFe77b5D91236A389800</a></td></tr> <tr><td>TokenDeployProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x107987e80D14A1D57ECf9bddb062540214f42cd2" target="_self" rel="noopener noreferrer alternate">0x107987e80D14A1D57ECf9bddb062540214f42cd2</a></td></tr> <tr><td>TokenTransferProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x1028120053061420cD88dd5C359a4215A220a55A" target="_self" rel="noopener noreferrer alternate">0x1028120053061420cD88dd5C359a4215A220a55A</a></td></tr> <tr><td>XcertCreateProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x7A0787303aC4d4EA9555889193b3162590174e53" target="_self" rel="noopener noreferrer alternate">0x7A0787303aC4d4EA9555889193b3162590174e53</a></td></tr> <tr><td>XcertDeployGateway</td> <td><a href="https://rinkeby.etherscan.io/address/0xBdd421cfD425BC952d704c2C68D902672FF7738D" target="_self" rel="noopener noreferrer alternate">0xBdd421cfD425BC952d704c2C68D902672FF7738D</a></td></tr> <tr><td>XcertDeployProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x68e01C55A13AfEC8D3F2F54e3C6c16dbB52A320b" target="_self" rel="noopener noreferrer alternate">0x68e01C55A13AfEC8D3F2F54e3C6c16dbB52A320b</a></td></tr> <tr><td>XcertDestroyProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x281fe2B7557F6fC1B124977B8758afa2deC314dC" target="_self" rel="noopener noreferrer alternate">0x281fe2B7557F6fC1B124977B8758afa2deC314dC</a></td></tr> <tr><td>XcertUpdateProxy</td> <td><a href="https://rinkeby.etherscan.io/address/0x9790F46776F73f96bb996EBC813aeA36aA874D8a" target="_self" rel="noopener noreferrer alternate">0x9790F46776F73f96bb996EBC813aeA36aA874D8a</a></td></tr></tbody></table> <h2 id="possible-errors"><a href="#possible-errors" class="header-anchor">#</a> Possible errors</h2> <p>The 0xcert Framework handles any kind of error that happens either in smart contracts or in the Framework itself and provides a thorough description wherever possible.</p> <p>Error example:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'ProviderError'</span><span class="token punctuation">,</span>
  issue<span class="token operator">:</span> <span class="token string">'001001'</span><span class="token punctuation">,</span>
  original<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// optional</span>
  message<span class="token operator">:</span> <span class="token string">'Sender does not have sufficient balance.'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This is a list of all possible errors that can be thrown by the 0xcert Framework. The list is split into two categories depending on the origin of the error.</p> <h3 id="framework-errors"><a href="#framework-errors" class="header-anchor">#</a> Framework errors</h3> <table><thead><tr><th>Code</th> <th>Description</th></tr></thead> <tbody><tr><td>0</td> <td>Generic provider error</td></tr> <tr><td>5000001</td> <td>Actions order kind not supported.</td></tr> <tr><td>5000002</td> <td>Amount of signature not consistent with signers for DYNAMIC_ACTIONS_ORDER kind.</td></tr> <tr><td>5000003</td> <td>Amount of signature not consistent with signers for FIXED_ACTIONS_ORDER kind.</td></tr> <tr><td>5000004</td> <td>Amount of signature not consistent with signers for SIGNED_DYNAMIC_ACTIONS_ORDER kind.</td></tr> <tr><td>5000005</td> <td>Amount of signature not consistent with signers for SIGNED_FIXED_ACTIONS_ORDER kind.</td></tr> <tr><td>5000006</td> <td>ReceiverId is not set.</td></tr> <tr><td>5000007</td> <td>SenderId is not a signer.</td></tr> <tr><td>5000008</td> <td>SenderId is not a signer.</td></tr> <tr><td>5000009</td> <td>Both senderId and receiverId are missing.</td></tr> <tr><td>5000010</td> <td>Not implemented.</td></tr> <tr><td>5000011</td> <td>First set approval to 0. ERC-20 token potential attack.</td></tr></tbody></table> <h3 id="smart-contract-errors"><a href="#smart-contract-errors" class="header-anchor">#</a> Smart contract errors</h3> <table><thead><tr><th>Code</th> <th>Description</th></tr></thead> <tbody><tr><td>1</td> <td>Generic smart contract error</td></tr> <tr><td>001001</td> <td>Sender does not have sufficient balance.</td></tr> <tr><td>001002</td> <td>You do not have sufficient allowance.</td></tr> <tr><td>003001</td> <td>Provided address cannot be zero address.</td></tr> <tr><td>003002</td> <td>Asset with this ID does not exist.</td></tr> <tr><td>003003</td> <td>Sender is neither asset owner nor operator.</td></tr> <tr><td>003004</td> <td>Sender is neither asset owner, approved nor operator.</td></tr> <tr><td>003005</td> <td>Receiver is not able to safely receive the asset.</td></tr> <tr><td>003006</td> <td>Asset with provided ID already exists.</td></tr> <tr><td>004001</td> <td>Provided address cannot be zero address.</td></tr> <tr><td>004002</td> <td>Asset with this ID does not exist.</td></tr> <tr><td>004003</td> <td>Sender is neither asset owner nor operator.</td></tr> <tr><td>004004</td> <td>Sender is neither asset owner, approved nor operator.</td></tr> <tr><td>004005</td> <td>Receiver is not able to safely receive the asset.</td></tr> <tr><td>004006</td> <td>Asset with provided ID already exists.</td></tr> <tr><td>005001</td> <td>Provided address cannot be zero address.</td></tr> <tr><td>005002</td> <td>Asset with this ID does not exist.</td></tr> <tr><td>005003</td> <td>Sender is neither asset owner nor operator.</td></tr> <tr><td>005004</td> <td>Sender is neither asset owner, approved nor operator.</td></tr> <tr><td>005005</td> <td>Receiver is not able to safely receive the asset.</td></tr> <tr><td>005006</td> <td>Asset with provided ID already exists.</td></tr> <tr><td>005007</td> <td>There is no asset at provided index.</td></tr> <tr><td>006001</td> <td>Provided address cannot be zero address.</td></tr> <tr><td>006002</td> <td>Asset with this ID does not exist.</td></tr> <tr><td>006003</td> <td>Sender is neither asset owner nor operator.</td></tr> <tr><td>006004</td> <td>Sender is neither asset owner, approved nor operator.</td></tr> <tr><td>006005</td> <td>Receiver is not able to safely receive the asset.</td></tr> <tr><td>006006</td> <td>Asset with provided ID already exists.</td></tr> <tr><td>006007</td> <td>There is no asset at provided index.</td></tr> <tr><td>007001</td> <td>Asset ledger does not have capability for this action.</td></tr> <tr><td>007002</td> <td>Transfers on this asset ledger are currently disabled.</td></tr> <tr><td>007003</td> <td>Asset with this ID does not exist.</td></tr> <tr><td>007004</td> <td>Sender is neither asset owner nor operator.</td></tr> <tr><td>007005</td> <td>Provided signature is invalid.</td></tr> <tr><td>007006</td> <td>Provided signature kind is invalid.</td></tr> <tr><td>007007</td> <td>This order was already performed.</td></tr> <tr><td>007008</td> <td>This order has expired.</td></tr> <tr><td>008001</td> <td>This action caused a math error: overflow.</td></tr> <tr><td>008002</td> <td>This action caused a math error: subtrahend is greater than minuend.</td></tr> <tr><td>008003</td> <td>This action caused a math error: division by zero.</td></tr> <tr><td>009001</td> <td>Provided signature kind is invalid.</td></tr> <tr><td>009002</td> <td>Sender is not allowed to execute this order.</td></tr> <tr><td>009003</td> <td>This order has expired.</td></tr> <tr><td>009004</td> <td>Provided signature is invalid.</td></tr> <tr><td>009005</td> <td>This order was canceled.</td></tr> <tr><td>009006</td> <td>This order was already performed.</td></tr> <tr><td>009007</td> <td>Sender is not the creator of this order.</td></tr> <tr><td>010001</td> <td>Sender does not have sufficient balance.</td></tr> <tr><td>010002</td> <td>You do not have sufficient allowance.</td></tr> <tr><td>010003</td> <td>Tokens cannot be sent to this recipient. Recipients are limited.</td></tr> <tr><td>010004</td> <td>Migration is not in progress.</td></tr> <tr><td>010005</td> <td>Migration is in progress.</td></tr> <tr><td>010006</td> <td>Migration cannot be performed. Please notify token owner.</td></tr> <tr><td>011001</td> <td>Provided signature kind is invalid.</td></tr> <tr><td>011002</td> <td>Sender is not allowed to execute this order.</td></tr> <tr><td>011003</td> <td>This order has expired.</td></tr> <tr><td>011004</td> <td>Provided signature is invalid.</td></tr> <tr><td>011005</td> <td>This order was canceled.</td></tr> <tr><td>011006</td> <td>This order was already performed.</td></tr> <tr><td>011007</td> <td>Sender is not the creator of this order.</td></tr> <tr><td>012001</td> <td>Transfer failed.</td></tr> <tr><td>015001</td> <td>Provided signature kind is invalid.</td></tr> <tr><td>015002</td> <td>Invalid proxy.</td></tr> <tr><td>015003</td> <td>Sender is not one of the signers.</td></tr> <tr><td>015004</td> <td>This order has expired.</td></tr> <tr><td>015005</td> <td>Provided signature is invalid.</td></tr> <tr><td>015006</td> <td>This order was canceled.</td></tr> <tr><td>015007</td> <td>This order was already performed.</td></tr> <tr><td>015008</td> <td>Sender is not one of the signers.</td></tr> <tr><td>015009</td> <td>Signer of CREATE_ASSET action does not have ALLOW_CREATE_ASSET ability.</td></tr> <tr><td>015010</td> <td>Signer of UPDATE_ASSET action does not have ALLOW_UPDATE_ASSET ability.</td></tr> <tr><td>015011</td> <td>Signer of SET_ASSET_LEDGER_ABILITY action does not have ALLOW_MANAGE_ABILITIES ability.</td></tr> <tr><td>015012</td> <td>Signer of DESTROY_ASSET action is not the asset owner.</td></tr> <tr><td>017001</td> <td>Sender does not have specified ability.</td></tr> <tr><td>017002</td> <td>Ability 0 is not a valid ability.</td></tr> <tr><td>018001</td> <td>Sender is not an owner.</td></tr> <tr><td>018002</td> <td>Provided address cannot be zero address.</td></tr> <tr><td>019001</td> <td>Sender cannot claim ownership.</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/0xcert/framework/edit/master/docs/api/ethereum-connectors.md" target="_blank" rel="noopener noreferrer">Help us improve this page.</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/20/2020, 6:28:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/0xcertapi-client.html" class="prev">0xcertAPI Client</a></span> <span class="next"><a href="/api/wanchain-connectors.html">Wanchain connectors</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.f6c584b2.js" defer></script><script src="/assets/js/2.f20c3283.js" defer></script><script src="/assets/js/7.75831217.js" defer></script><script src="/assets/js/13.b5257690.js" defer></script><script src="/assets/js/5.8bbd2355.js" defer></script>
  </body>
</html>
